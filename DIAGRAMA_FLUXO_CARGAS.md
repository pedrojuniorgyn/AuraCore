# ğŸ“Š DIAGRAMAS VISUAIS - REPOSITÃ“RIO DE CARGAS

---

## ğŸ”„ **FLUXO COMPLETO: Do XML Ã  Entrega**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                       â”‚
â”‚  CLIENTE (Unilever)                                                  â”‚
â”‚  â”œâ”€ Emite NFe da mercadoria                                         â”‚
â”‚  â”œâ”€ Informa TCL como transportador                                  â”‚
â”‚  â””â”€ Envia para Sefaz                                                â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 1: IMPORTAÃ‡ÃƒO AUTOMÃTICA (Sefaz)                              â”‚
â”‚                                                                       â”‚
â”‚  API: /api/sefaz/download-nfes                                       â”‚
â”‚  â”œâ”€ Download DFe                                                     â”‚
â”‚  â”œâ”€ Descompacta XML (GZIP)                                           â”‚
â”‚  â”œâ”€ Parse NFe                                                        â”‚
â”‚  â””â”€ ğŸ†• classifyNFe() â† NOVO!                                         â”‚
â”‚      â”œâ”€ LÃª <dest> (destinatÃ¡rio)                                    â”‚
â”‚      â”œâ”€ LÃª <transp> (transportador)                                 â”‚
â”‚      â””â”€ Compara CNPJs                                                â”‚
â”‚                                                                       â”‚
â”‚  RESULTADO:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ inbound_invoices                                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ nfe_type = 'CARGO' âœ…                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ carrier_cnpj = 'SEU_CNPJ' âœ…                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ recipient_* (destino) âœ…                                 â”‚   â”‚
â”‚  â”‚ â””â”€ xml_content (completo)                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  ğŸ†• SE nfe_type = 'CARGO':                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cargo_documents (RepositÃ³rio)                               â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'PENDING' â³                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ nfe_invoice_id (link)                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ origem / destino (rota)                                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ peso / valor (carga)                                     â”‚   â”‚
â”‚  â”‚ â””â”€ delivery_deadline (prazo)                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 2: VISUALIZAÃ‡ÃƒO (Operador TMS)                                â”‚
â”‚                                                                       â”‚
â”‚  Tela: /tms/repositorio-cargas                                       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  ğŸ“¦ REPOSITÃ“RIO DE CARGAS                             â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  KPIs:                                                 â”‚         â”‚
â”‚  â”‚  â”œâ”€ ğŸ”´ 15 Cargas Pendentes                             â”‚         â”‚
â”‚  â”‚  â”œâ”€ âš ï¸  3 Vencendo em 24h                              â”‚         â”‚
â”‚  â”‚  â””â”€ ğŸ’° R$ 450.000,00 (Valor Total)                     â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  AG Grid:                                              â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚         â”‚
â”‚  â”‚  â”‚ NFe  â”‚ Cliente     â”‚ Rota    â”‚ Peso  â”‚ Prazo  â”‚   â”‚         â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚         â”‚
â”‚  â”‚  â”‚ 1234 â”‚ Unilever    â”‚ SPâ†’BA   â”‚ 15t   â”‚ 2 dias â”‚   â”‚         â”‚
â”‚  â”‚  â”‚ 5678 â”‚ Ambev       â”‚ RJâ†’MG   â”‚ 20t   â”‚ URGENTEâ”‚ â† Vermelho
â”‚  â”‚  â”‚ 9012 â”‚ Coca-Cola   â”‚ GOâ†’DF   â”‚ 8t    â”‚ 5 dias â”‚   â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  AÃ§Ãµes: [Alocar em Viagem] [Ver Detalhes]             â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 3: ALOCAÃ‡ÃƒO (Criar Viagem)                                    â”‚
â”‚                                                                       â”‚
â”‚  Tela: /tms/viagens/create (Modal Wizard)                           â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  CRIAR VIAGEM - WIZARD                                â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  [Step 1] VeÃ­culo + Motorista                         â”‚         â”‚
â”‚  â”‚  â”œâ”€ Scania R450 - ABC1D23                             â”‚         â”‚
â”‚  â”‚  â””â”€ JoÃ£o Silva (CNH vÃ¡lida)                           â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  [Step 2] ğŸ†• Selecionar Cargas do RepositÃ³rio         â”‚         â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚         â”‚
â”‚  â”‚  â”‚ Cargas disponÃ­veis para SP â†’ BA:            â”‚     â”‚         â”‚
â”‚  â”‚  â”‚ â˜‘ï¸ NFe 1234 - Unilever (15t)                 â”‚ â†  Multi-sel
â”‚  â”‚  â”‚ â˜‘ï¸ NFe 2222 - NestlÃ© (10t)                   â”‚     â”‚         â”‚
â”‚  â”‚  â”‚ â˜  NFe 3333 - Pepsico (5t)                   â”‚     â”‚         â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  [Step 3] Rota + Paradas                              â”‚         â”‚
â”‚  â”‚  [Step 4] Confirmar                                   â”‚         â”‚
â”‚  â”‚                                                         â”‚         â”‚
â”‚  â”‚  [Criar Viagem]                                        â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                       â”‚
â”‚  RESULTADO:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ trips                                                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ trip_number = 'VIA-2024-001'                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ vehicle_id = Scania R450                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ driver_id = JoÃ£o Silva                                  â”‚   â”‚
â”‚  â”‚ â””â”€ cargo_document_ids = [1234, 2222] âœ… JSON array         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cargo_documents (NFe 1234 e 2222)                          â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'ASSIGNED_TO_TRIP' âœ… (era PENDING)            â”‚   â”‚
â”‚  â”‚ â””â”€ trip_id = VIA-2024-001 âœ…                                â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 4: EMISSÃƒO DE CTe (Fiscal SaÃ­da)                              â”‚
â”‚                                                                       â”‚
â”‚  API: /api/fiscal/cte                                                â”‚
â”‚  Service: cte-builder.ts                                             â”‚
â”‚                                                                       â”‚
â”‚  1. Buscar viagem                                                    â”‚
â”‚  2. ğŸ†• Buscar cargo_documents vinculados                             â”‚
â”‚  3. ğŸ†• Montar XML com <infDoc> para CADA NFe:                        â”‚
â”‚                                                                       â”‚
â”‚  <infCTeNorm>                                                        â”‚
â”‚    <infDoc>                                                          â”‚
â”‚      <infNFe>                                                        â”‚
â”‚        <chave>NFe1234567890123456789012345678901234567890</chave>   â”‚
â”‚        <vNF>25000.00</vNF>                                          â”‚
â”‚        <pesoM>15000</pesoM>                                         â”‚
â”‚      </infNFe>                                                       â”‚
â”‚    </infDoc>                                                         â”‚
â”‚    <infDoc>                                                          â”‚
â”‚      <infNFe>                                                        â”‚
â”‚        <chave>NFe2222567890123456789012345678901234567890</chave>   â”‚
â”‚        <vNF>18000.00</vNF>                                          â”‚
â”‚        <pesoM>10000</pesoM>                                         â”‚
â”‚      </infNFe>                                                       â”‚
â”‚    </infDoc>                                                         â”‚
â”‚  </infCTeNorm>                                                       â”‚
â”‚                                                                       â”‚
â”‚  4. Assinar XML (Certificado A1)                                    â”‚
â”‚  5. Enviar para Sefaz                                                â”‚
â”‚  6. Status: AUTHORIZED âœ…                                            â”‚
â”‚                                                                       â”‚
â”‚  RESULTADO:                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cte_header                                                  â”‚   â”‚
â”‚  â”‚ â”œâ”€ cte_number = 123                                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ cte_key = '35241234567890000157...' (44 dÃ­gitos)        â”‚   â”‚
â”‚  â”‚ â”œâ”€ trip_id = VIA-2024-001                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'AUTHORIZED' âœ…                                 â”‚   â”‚
â”‚  â”‚ â””â”€ xml_signed (completo)                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cte_cargo_documents (VÃ­nculo NFes â†’ CTe)                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ cte_header_id = 123                                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ document_key = 'NFe1234...'                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ source_invoice_id = 1234 âœ… (rastreabilidade)            â”‚   â”‚
â”‚  â”‚ â””â”€ source_cargo_id = 999 âœ… (rastreabilidade)               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cargo_documents                                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'IN_TRANSIT' âœ… (era ASSIGNED)                  â”‚   â”‚
â”‚  â”‚ â””â”€ cte_id = 123 âœ…                                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 5: FINANCEIRO (AutomÃ¡tico)                                    â”‚
â”‚                                                                       â”‚
â”‚  Trigger: CTe status = AUTHORIZED                                    â”‚
â”‚  Service: workflow-automator.ts â†’ createReceivableFromCte()         â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ accounts_receivable                                         â”‚   â”‚
â”‚  â”‚ â”œâ”€ partner_id = Unilever                                    â”‚   â”‚
â”‚  â”‚ â”œâ”€ description = 'Frete CTe-123'                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ amount = R$ 5.500,00                                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ due_date = +30 dias                                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'OPEN'                                          â”‚   â”‚
â”‚  â”‚ â””â”€ origin = 'FISCAL_CTE' âœ…                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FASE 6: ENTREGA (OperaÃ§Ã£o)                                         â”‚
â”‚                                                                       â”‚
â”‚  Motorista: Entrega mercadoria                                       â”‚
â”‚  Sistema: Atualiza status                                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ trips                                                        â”‚   â”‚
â”‚  â”‚ â””â”€ status = 'COMPLETED' âœ…                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ cargo_documents                                             â”‚   â”‚
â”‚  â”‚ â”œâ”€ status = 'DELIVERED' âœ…                                  â”‚   â”‚
â”‚  â”‚ â””â”€ delivered_at = 2024-12-08 14:30 âœ…                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ **RELACIONAMENTO ENTRE TABELAS (ER Diagram)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  inbound_invoices      â”‚
â”‚  (Todas NFes)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… nfe_type (NOVO!)    â”‚ â† ClassificaÃ§Ã£o automÃ¡tica
â”‚    - PURCHASE          â”‚   (compra, carga, devoluÃ§Ã£o)
â”‚    - CARGO             â”‚
â”‚    - RETURN            â”‚
â”‚ âœ… carrier_* (NOVO!)   â”‚
â”‚ âœ… recipient_* (NOVO!) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â”‚ 1:N (se CARGO)
          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ†• cargo_documents         â”‚
â”‚  (RepositÃ³rio de Cargas)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ nfe_invoice_id (FK) â”€â”€â”€â”€â”€â”€â”˜
â”‚ â€¢ status (workflow)         â”‚
â”‚ â€¢ origem / destino          â”‚
â”‚ â€¢ peso / valor / volume     â”‚
â”‚ â€¢ delivery_deadline         â”‚
â”‚ â€¢ trip_id (FK) â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚ â€¢ cte_id (FK) â”€â”€â”€â”   â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”˜
                   â”‚   â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                         â”‚
         â†“                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cte_header      â”‚      â”‚  trips         â”‚
â”‚  (Conhecimentos) â”‚      â”‚  (Viagens)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ cte_number     â”‚      â”‚ â€¢ trip_number  â”‚
â”‚ â€¢ cte_key        â”‚      â”‚ â€¢ vehicle_id   â”‚
â”‚ â€¢ status         â”‚      â”‚ â€¢ driver_id    â”‚
â”‚ â€¢ trip_id        â”‚      â”‚ â€¢ status       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1:N
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cte_cargo_documents            â”‚
â”‚  (NFes no CTe)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ cte_header_id (FK)            â”‚
â”‚ â€¢ document_key (chave NFe)      â”‚
â”‚ âœ… source_invoice_id (NOVO!)    â”‚ â† Rastreabilidade
â”‚ âœ… source_cargo_id (NOVO!)      â”‚   completa!
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **ESTADOS DO CARGO (MÃ¡quina de Estados)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚  â† Importado da Sefaz, aguardando alocaÃ§Ã£o
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Operador: "Alocar em Viagem"
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ASSIGNED_TO_TRIP   â”‚  â† Vinculado a viagem, aguarda CTe
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ CTe autorizado pela Sefaz
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ IN_TRANSIT  â”‚  â† Mercadoria em trÃ¢nsito
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Motorista: "Confirmar Entrega"
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DELIVERED  â”‚  â† Ciclo completo! âœ…
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

       OU
       
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   PENDING   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Cliente: "Cancelar carga"
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CANCELED   â”‚  â† NFe cancelada, nÃ£o serÃ¡ transportada
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‹ **EXEMPLO DE DADOS (Caso Real)**

### **NFe Importada (Unilever):**

```json
// inbound_invoices
{
  "id": 1234,
  "access_key": "35241201227943000105550010000012341000012345",
  "number": "1234",
  "series": "1",
  "issue_date": "2024-12-08",
  "total_nfe": "25000.00",
  
  // âœ… NOVO!
  "nfe_type": "CARGO",
  "carrier_cnpj": "12345678000190", // TCL
  "carrier_name": "TCL Transporte Rodoviario",
  "recipient_cnpj": "98765432000111", // Supermercado
  "recipient_name": "Rede SuperBom",
  "recipient_city": "Salvador",
  "recipient_uf": "BA",
  
  "partner_id": 999, // Unilever (emitente)
  "xml_content": "<NFe>...</NFe>",
  "status": "IMPORTED"
}
```

### **Cargo Criado Automaticamente:**

```json
// cargo_documents
{
  "id": 5678,
  "nfe_invoice_id": 1234, // Link com NFe acima
  "access_key": "35241201227943000105550010000012341000012345",
  "nfe_number": "1234",
  "issuer_name": "Unilever Brasil Ltda",
  "recipient_name": "Rede SuperBom",
  
  "origin_uf": "SP",
  "origin_city": "Indaiatuba",
  "destination_uf": "BA",
  "destination_city": "Salvador",
  
  "cargo_value": "25000.00",
  "weight": "15000", // 15 toneladas
  "volume": "45.5", // 45.5 mÂ³
  
  "status": "PENDING", // â³ Aguardando alocaÃ§Ã£o
  "issue_date": "2024-12-08",
  "delivery_deadline": "2024-12-10T18:00:00", // 2 dias!
  
  "trip_id": null, // Ainda nÃ£o alocado
  "cte_id": null
}
```

### **Depois de Alocar em Viagem:**

```json
// trips
{
  "id": 100,
  "trip_number": "VIA-2024-001",
  "vehicle_id": 10, // Scania R450
  "driver_id": 5, // JoÃ£o Silva
  "status": "IN_TRANSIT"
}

// cargo_documents (atualizado)
{
  "id": 5678,
  "status": "ASSIGNED_TO_TRIP", // âœ… Status mudou
  "trip_id": 100, // âœ… Link com viagem
  ...
}
```

### **Depois de Gerar CTe:**

```json
// cte_header
{
  "id": 200,
  "cte_number": 123,
  "cte_key": "35241234567890000157570010000001231000001234",
  "trip_id": 100,
  "status": "AUTHORIZED"
}

// cte_cargo_documents
{
  "id": 300,
  "cte_header_id": 200,
  "document_type": "NFE",
  "document_key": "35241201227943000105550010000012341000012345",
  "document_value": "25000.00",
  
  "source_invoice_id": 1234, // âœ… Rastreabilidade!
  "source_cargo_id": 5678 // âœ… Rastreabilidade!
}

// cargo_documents (atualizado)
{
  "id": 5678,
  "status": "IN_TRANSIT", // âœ… Status mudou
  "trip_id": 100,
  "cte_id": 200, // âœ… Link com CTe
  ...
}
```

---

## ğŸ” **QUERIES ÃšTEIS (Consultas SQL)**

### **1. Listar cargas pendentes:**

```sql
SELECT 
  c.id,
  c.nfe_number,
  i.partner_id,
  bp.name AS issuer_name,
  c.destination_city,
  c.cargo_value,
  c.weight,
  DATEDIFF(HOUR, GETDATE(), c.delivery_deadline) AS hours_until_deadline
FROM cargo_documents c
INNER JOIN inbound_invoices i ON i.id = c.nfe_invoice_id
INNER JOIN business_partners bp ON bp.id = i.partner_id
WHERE c.status = 'PENDING'
  AND c.deleted_at IS NULL
ORDER BY c.delivery_deadline ASC;
```

### **2. Rastrear NFe completo (da importaÃ§Ã£o Ã  entrega):**

```sql
SELECT 
  'NFe' AS origem,
  i.access_key,
  i.nfe_type,
  i.status AS nfe_status,
  
  c.status AS cargo_status,
  
  t.trip_number,
  t.status AS trip_status,
  
  cte.cte_number,
  cte.cte_key,
  cte.status AS cte_status,
  
  ar.amount AS valor_receber,
  ar.status AS financeiro_status
FROM inbound_invoices i
LEFT JOIN cargo_documents c ON c.nfe_invoice_id = i.id
LEFT JOIN trips t ON t.id = c.trip_id
LEFT JOIN cte_header cte ON cte.id = c.cte_id
LEFT JOIN accounts_receivable ar ON ar.document_number = cte.cte_key
WHERE i.access_key = '35241201227943000105550010000012341000012345';
```

### **3. Dashboard KPIs (RepositÃ³rio):**

```sql
-- Total de cargas pendentes
SELECT COUNT(*) FROM cargo_documents WHERE status = 'PENDING';

-- Cargas urgentes (< 24h)
SELECT COUNT(*) 
FROM cargo_documents 
WHERE status = 'PENDING' 
  AND DATEDIFF(HOUR, GETDATE(), delivery_deadline) < 24;

-- Valor total em aberto
SELECT SUM(cargo_value) 
FROM cargo_documents 
WHERE status IN ('PENDING', 'ASSIGNED_TO_TRIP');
```

---

## ğŸ¨ **PROTÃ“TIPO DE UI (Wireframe)**

### **RepositÃ³rio de Cargas:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¦ REPOSITÃ“RIO DE CARGAS                          [Atualizar]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ ğŸ”´ Pendente  â”‚  â”‚ âš ï¸  Urgente  â”‚  â”‚ ğŸ’° Valor     â”‚         â”‚
â”‚  â”‚     15       â”‚  â”‚      3       â”‚  â”‚  R$ 450K     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                  â”‚
â”‚  Filtros: [Todos] [SPâ†’BA] [Urgentes] [Cliente: _______]        â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ NFe    Cliente       Rota   Peso  Valor     Prazo  AÃ§Ã£oâ”‚    â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
â”‚  â”‚ 1234   Unilever     SPâ†’BA   15t   25.000  ğŸŸ¢ 5d  [â–¶]  â”‚    â”‚
â”‚  â”‚ 5678   Ambev        RJâ†’MG   20t   35.000  ğŸ”´ 12h [â–¶]  â”‚ â† Urgente!
â”‚  â”‚ 9012   Coca-Cola    GOâ†’DF    8t   15.000  ğŸŸ¢ 3d  [â–¶]  â”‚    â”‚
â”‚  â”‚ 3456   NestlÃ©       MGâ†’SP   12t   22.000  ğŸŸ¡ 2d  [â–¶]  â”‚    â”‚
â”‚  â”‚ 7890   Pepsico      BAâ†’PE    9t   18.000  ğŸŸ¢ 4d  [â–¶]  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                  â”‚
â”‚  [â–¶] = Alocar em Viagem | ğŸ”´ < 24h | ğŸŸ¡ < 48h | ğŸŸ¢ > 48h      â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**âœ… ANÃLISE COMPLETA!**

**Documentos gerados:**
1. âœ… `ANÃLISE_REPOSITÃ“RIO_CARGAS.md` (Planejamento tÃ©cnico)
2. âœ… `DIAGRAMA_FLUXO_CARGAS.md` (Diagramas visuais)

**Aguardando sua APROVAÃ‡ÃƒO para iniciar a implementaÃ§Ã£o!**







