{
  "epic": "E7.4.1",
  "corrections": [
    {
      "id": "LC-441890",
      "date": "2025-12-29",
      "epic": "E7.4.1",
      "error": "Conflito de export: TaxRegime estava sendo exportado tanto de value-objects (novo) quanto de ICMSCalculator (antigo), causando erro TS2308",
      "correction": "Renomeado TaxRegime em ICMSCalculator.ts para ICMSTaxRegime, evitando conflito com o novo TaxRegime do módulo de Reforma Tributária. Atualizado index.ts de calculators para exportar ICMSTaxRegime.",
      "files_affected": [
        "src/modules/fiscal/domain/tax/calculators/ICMSCalculator.ts",
        "src/modules/fiscal/domain/tax/calculators/index.ts"
      ],
      "pattern_created": null,
      "status": "APPROVED",
      "must_not_repeat": true
    },
    {
      "id": "LC-844781",
      "date": "2025-12-31",
      "epic": "E7.4.1",
      "error": "Non-null assertion (.value!) em Result sem verificação no método MockSplitPaymentService.generateSummary(). Três ocorrências: totalAmount, tributoMoney e recipientMoney usavam .value! diretamente, violando o Result pattern e podendo causar erro runtime se Money.create() falhasse.",
      "correction": "Substituir .value! por verificação com Result.isOk() antes de acessar .value. Adicionar throw Error se Result falhar (não deve ocorrer com valores numéricos válidos). Adicionar import de Result do @/shared/domain. Adicionar disclaimer no test-client.ts documentando que é STUB intencional.",
      "files_affected": [
        "src/modules/fiscal/domain/split-payment/MockSplitPaymentService.ts",
        "tests/helpers/test-client.ts"
      ],
      "pattern_created": "Result Pattern Verification",
      "status": "APPROVED",
      "must_not_repeat": true
    }
  ]
}