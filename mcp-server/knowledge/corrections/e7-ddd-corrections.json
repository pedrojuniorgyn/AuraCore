{
  "epic": "E7-DDD",
  "corrections": [
    {
      "id": "LC-041712",
      "date": "2025-12-28",
      "epic": "E7-DDD",
      "error": "E7.0: Setup + Infraestrutura de Testes - Criar estrutura base para migração DDD/Hexagonal Híbrido",
      "correction": "Estrutura modular criada (src/modules/{financial,accounting,fiscal,tms,wms} + src/shared/domain + infrastructure + tests/), tsyringe configurado com TOKENS e container, Result<T,E> pattern implementado, AggregateRoot/Entity/ValueObject/DomainEvent/DomainError classes base implementadas, Vitest configurado com 80% coverage threshold + setup helpers + InMemoryRepository base, scripts npm (test, test:ui, test:coverage, test:watch) adicionados",
      "files_affected": [
        "src/shared/domain/types/Result.ts",
        "src/shared/domain/entities/AggregateRoot.ts",
        "src/shared/domain/entities/Entity.ts",
        "src/shared/domain/entities/ValueObject.ts",
        "src/shared/domain/events/DomainEvent.ts",
        "src/shared/domain/errors/DomainError.ts",
        "src/shared/infrastructure/di/tokens.ts",
        "src/shared/infrastructure/di/container.ts",
        "src/shared/infrastructure/di/index.ts",
        "src/shared/domain/index.ts",
        "src/shared/index.ts",
        "vitest.config.ts",
        "tests/setup.ts",
        "tests/helpers/mocks/repositories/InMemoryRepository.ts",
        "package.json"
      ],
      "pattern_created": null,
      "status": "APPROVED",
      "must_not_repeat": true
    },
    {
      "id": "LC-262670",
      "date": "2025-12-28",
      "epic": "E7-DDD",
      "error": "E7.1 Parcial: Value Objects Money, CNPJ, Email com testes completos + correções de ambiente (crypto.randomUUID fallback, vitest node_modules exclusion, Email trim)",
      "correction": "Implementados 3 Value Objects com TDD: Money (22 testes - operações monetárias, formatação pt-BR, conversão cents), CNPJ (10 testes - validação dígitos verificadores brasileiros), Email (12 testes - validação formato, domain, localPart). Corrigido crypto.randomUUID em DomainEvent com fallback para getRandomValues e Math.random. Corrigido vitest.config para excluir node_modules. Corrigido Email para trim ANTES de validar. 100% type-safe, zero any, todas interfaces satisfazem Record<string, unknown> constraint.",
      "files_affected": [
        "src/shared/domain/value-objects/Money.ts",
        "src/shared/domain/value-objects/CNPJ.ts",
        "src/shared/domain/value-objects/Email.ts",
        "src/shared/domain/value-objects/index.ts",
        "src/shared/domain/events/DomainEvent.ts",
        "tests/unit/shared/value-objects/Money.test.ts",
        "tests/unit/shared/value-objects/CNPJ.test.ts",
        "tests/unit/shared/value-objects/Email.test.ts",
        "vitest.config.ts"
      ],
      "pattern_created": null,
      "status": "APPROVED",
      "must_not_repeat": true
    }
  ]
}