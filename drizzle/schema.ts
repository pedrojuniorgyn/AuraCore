import { mssqlSchema, mssqlTable, nvarchar, int, datetime2, decimal, date, varchar, bit, datetime, bigint, text, uniqueIndex, index, unique, foreignKey, primaryKey, check } from "drizzle-orm/mssql-core"
import { sql } from "drizzle-orm"

export const drizzle = mssqlSchema("drizzle");

export const drizzleMigrationsInDrizzle = drizzle.table("__drizzle_migrations", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	hash: text().notNull(),
	createdAt: bigint("created_at", { mode: 'number' }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK____drizzl__3213E83FD73C4EF9"}),
]);

export const accountMapping = mssqlTable("account_mapping", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	chartAccountId: int("chart_account_id").notNull(),
	managementAccountId: int("management_account_id").notNull(),
	allocationPercentage: decimal("allocation_percentage", { precision: 5, scale: 2, mode: 'number' }).default(100.00),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__account___3213E83F14280DB0"}),
]);

export const accounts = mssqlTable("accounts", {
	userId: nvarchar({ length: 255 }).notNull().references(() => users.id, { onDelete: "cascade" } ),
	type: nvarchar({ length: 255 }).notNull(),
	provider: nvarchar({ length: 255 }).notNull(),
	providerAccountId: nvarchar({ length: 255 }).notNull(),
	refreshToken: nvarchar("refresh_token", { length: 'max' }),
	accessToken: nvarchar("access_token", { length: 'max' }),
	expiresAt: int("expires_at"),
	tokenType: nvarchar("token_type", { length: 255 }),
	scope: nvarchar({ length: 'max' }),
	idToken: nvarchar("id_token", { length: 'max' }),
	sessionState: nvarchar("session_state", { length: 'max' }),
}, (table) => [
	primaryKey({ columns: [table.provider, table.providerAccountId], name: "accounts_pkey"}),
]);

export const accountsPayable = mssqlTable("accounts_payable", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	branchId: int("branch_id").notNull().references(() => branches.id),
	partnerId: int("partner_id").references(() => businessPartners.id),
	categoryId: int("category_id").references(() => financialCategories.id),
	bankAccountId: int("bank_account_id").references(() => bankAccounts.id),
	description: nvarchar({ length: 'max' }).notNull(),
	documentNumber: nvarchar("document_number", { length: 100 }),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	dueDate: datetime2("due_date", { mode: 'string', precision: 7 }).notNull(),
	payDate: datetime2("pay_date", { mode: 'string', precision: 7 }),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	amountPaid: decimal("amount_paid", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	discount: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	interest: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	fine: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	status: nvarchar({ length: 20 }).default("OPEN").notNull(),
	origin: nvarchar({ length: 50 }).default("MANUAL"),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	costCenterId: int("cost_center_id").references(() => costCenters.id),
	chartAccountId: int("chart_account_id").references(() => chartOfAccounts.id),
	inboundInvoiceId: int("inbound_invoice_id").references(() => inboundInvoices.id),
	fiscalDocumentId: bigint("fiscal_document_id", { mode: 'number' }),
	journalEntryId: bigint("journal_entry_id", { mode: 'number' }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__accounts__3213E83FD519E602"}),
	index("idx_accounts_payable_branch").on(table.branchId),
	index("idx_accounts_payable_due_date").on(table.dueDate),
	index("idx_accounts_payable_fiscal_doc").on(table.fiscalDocumentId),
	index("idx_accounts_payable_journal").on(table.journalEntryId),
	index("idx_accounts_payable_org").on(table.organizationId),
	index("idx_accounts_payable_partner").on(table.partnerId),
	index("idx_accounts_payable_status").on(table.status),
]);

export const accountsReceivable = mssqlTable("accounts_receivable", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	branchId: int("branch_id").notNull().references(() => branches.id),
	partnerId: int("partner_id").references(() => businessPartners.id),
	categoryId: int("category_id").references(() => financialCategories.id),
	bankAccountId: int("bank_account_id").references(() => bankAccounts.id),
	description: nvarchar({ length: 'max' }).notNull(),
	documentNumber: nvarchar("document_number", { length: 100 }),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	dueDate: datetime2("due_date", { mode: 'string', precision: 7 }).notNull(),
	receiveDate: datetime2("receive_date", { mode: 'string', precision: 7 }),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	amountReceived: decimal("amount_received", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	discount: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	interest: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	fine: decimal({ precision: 18, scale: 2, mode: 'number' }).default(0.00),
	status: nvarchar({ length: 20 }).default("OPEN").notNull(),
	origin: nvarchar({ length: 50 }).default("MANUAL"),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	costCenterId: int("cost_center_id").references(() => costCenters.id),
	chartAccountId: int("chart_account_id").references(() => chartOfAccounts.id),
	cteDocumentId: int("cte_document_id"),
	fiscalDocumentId: bigint("fiscal_document_id", { mode: 'number' }),
	journalEntryId: bigint("journal_entry_id", { mode: 'number' }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__accounts__3213E83F10E14E33"}),
	index("idx_accounts_receivable_branch").on(table.branchId),
	index("idx_accounts_receivable_due_date").on(table.dueDate),
	index("idx_accounts_receivable_fiscal_doc").on(table.fiscalDocumentId),
	index("idx_accounts_receivable_journal").on(table.journalEntryId),
	index("idx_accounts_receivable_org").on(table.organizationId),
	index("idx_accounts_receivable_partner").on(table.partnerId),
	index("idx_accounts_receivable_status").on(table.status),
]);

export const auditLogs = mssqlTable("audit_logs", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	userId: nvarchar("user_id", { length: 255 }),
	action: nvarchar({ length: 50 }).notNull(),
	entity: nvarchar({ length: 50 }).notNull(),
	entityId: nvarchar("entity_id", { length: 255 }),
	changes: nvarchar({ length: 'max' }),
	ipAddress: nvarchar("ip_address", { length: 50 }),
	userAgent: nvarchar("user_agent", { length: 500 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
}, (table) => [
	primaryKey({ columns: [table.id], name: "audit_logs_pkey"}),
]);

export const autoClassificationRules = mssqlTable("auto_classification_rules", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	priority: int().default(100).notNull(),
	matchType: nvarchar("match_type", { length: 30 }).notNull(),
	ncmCode: nvarchar("ncm_code", { length: 10 }),
	cfopCode: nvarchar("cfop_code", { length: 10 }),
	supplierId: int("supplier_id").references(() => businessPartners.id),
	keyword: nvarchar({ length: 100 }),
	operationType: nvarchar("operation_type", { length: 20 }).notNull(),
	categoryId: int("category_id").notNull().references(() => financialCategories.id),
	chartAccountId: int("chart_account_id").notNull().references(() => chartOfAccounts.id),
	costCenterId: int("cost_center_id").references(() => costCenters.id),
	name: nvarchar({ length: 255 }).notNull(),
	description: nvarchar({ length: 'max' }),
	isActive: nvarchar("is_active", { mode: 'json', length: 10 }).default(true),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__auto_cla__3213E83F7921C16C"}),
	index("IX_auto_classification_ncm").on(table.ncmCode, table.operationType, table.isActive),
]);

export const bankAccounts = mssqlTable("bank_accounts", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	branchId: int("branch_id").references(() => branches.id),
	name: nvarchar({ length: 255 }).notNull(),
	bankCode: nvarchar("bank_code", { length: 10 }),
	bankName: nvarchar("bank_name", { length: 255 }),
	agency: nvarchar({ length: 20 }),
	accountNumber: nvarchar("account_number", { length: 50 }),
	accountType: nvarchar("account_type", { length: 50 }),
	initialBalance: decimal("initial_balance", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	currentBalance: decimal("current_balance", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	accountDigit: nvarchar("account_digit", { length: 2 }),
	wallet: nvarchar({ length: 20 }),
	agreementNumber: nvarchar("agreement_number", { length: 50 }),
	cnabLayout: nvarchar("cnab_layout", { length: 20 }).default("CNAB240"),
	nextRemittanceNumber: int("next_remittance_number").default(1),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__bank_acc__3213E83FEF5CAD5E"}),
	index("idx_bank_accounts_branch").on(table.branchId),
	index("idx_bank_accounts_org").on(table.organizationId),
]);

export const bankRemittances = mssqlTable("bank_remittances", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	bankAccountId: int("bank_account_id").notNull().references(() => bankAccounts.id),
	fileName: nvarchar("file_name", { length: 255 }).notNull(),
	content: nvarchar({ length: 'max' }).notNull(),
	remittanceNumber: int("remittance_number").notNull(),
	type: nvarchar({ length: 20 }).notNull(),
	status: nvarchar({ length: 50 }).default("GENERATED"),
	totalRecords: int("total_records").default(0),
	totalAmount: decimal("total_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	notes: nvarchar({ length: 'max' }),
	processedAt: datetime2("processed_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__bank_rem__3213E83F0ED7C338"}),
	index("idx_bank_remittances_created_at").on(table.createdAt),
	index("idx_bank_remittances_org_bank").on(table.organizationId, table.bankAccountId),
	index("idx_bank_remittances_status").on(table.status),
]);

export const bankTransactions = mssqlTable("bank_transactions", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	bankAccountId: int("bank_account_id").notNull(),
	transactionDate: datetime2("transaction_date", { mode: 'string', precision: 7 }).notNull(),
	description: nvarchar({ length: 500 }),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	balance: decimal({ precision: 18, scale: 2 }),
	transactionType: nvarchar("transaction_type", { length: 20 }),
	reconciled: nvarchar({ length: 1 }).default("N"),
	reconciledAt: datetime2("reconciled_at", { mode: 'string', precision: 7 }),
	reconciledBy: nvarchar("reconciled_by", { length: 255 }),
	accountsPayableId: int("accounts_payable_id"),
	accountsReceivableId: int("accounts_receivable_id"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__bank_tra__3213E83F7E129126"}),
]);

export const billingInvoices = mssqlTable("billing_invoices", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	invoiceNumber: nvarchar("invoice_number", { length: 50 }).notNull(),
	customerId: int("customer_id").notNull(),
	periodStart: datetime2("period_start", { mode: 'string', precision: 7 }).notNull(),
	periodEnd: datetime2("period_end", { mode: 'string', precision: 7 }).notNull(),
	billingFrequency: nvarchar("billing_frequency", { length: 20 }).notNull(),
	totalCtes: int("total_ctes").notNull(),
	grossValue: decimal("gross_value", { precision: 18, scale: 2 }).notNull(),
	discountValue: decimal("discount_value", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	netValue: decimal("net_value", { precision: 18, scale: 2 }).notNull(),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	dueDate: datetime2("due_date", { mode: 'string', precision: 7 }).notNull(),
	status: nvarchar({ length: 20 }).default("DRAFT").notNull(),
	accountsReceivableId: int("accounts_receivable_id"),
	barcodeNumber: nvarchar("barcode_number", { length: 54 }),
	pixKey: nvarchar("pix_key", { length: 500 }),
	pdfUrl: nvarchar("pdf_url", { length: 500 }),
	sentAt: datetime2("sent_at", { mode: 'string', precision: 7 }),
	sentTo: nvarchar("sent_to", { length: 255 }),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__billing___3213E83FDF074A59"}),
]);

export const billingItems = mssqlTable("billing_items", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	billingInvoiceId: int("billing_invoice_id").notNull(),
	cteId: int("cte_id").notNull(),
	cteNumber: int("cte_number").notNull(),
	cteSeries: nvarchar("cte_series", { length: 3 }),
	cteKey: nvarchar("cte_key", { length: 44 }),
	cteIssueDate: datetime2("cte_issue_date", { mode: 'string', precision: 7 }).notNull(),
	cteValue: decimal("cte_value", { precision: 18, scale: 2 }).notNull(),
	originUf: nvarchar("origin_uf", { length: 2 }),
	destinationUf: nvarchar("destination_uf", { length: 2 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__billing___3213E83F3917EFAB"}),
]);

export const branches = mssqlTable("branches", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 255 }).notNull(),
	tradeName: nvarchar("trade_name", { length: 255 }).notNull(),
	document: nvarchar({ length: 20 }).notNull(),
	email: nvarchar({ length: 255 }).notNull(),
	phone: nvarchar({ length: 20 }).notNull(),
	ie: nvarchar({ length: 20 }).notNull(),
	im: nvarchar({ length: 20 }),
	cClassTrib: nvarchar("c_class_trib", { length: 10 }),
	crt: nvarchar({ mode: 'json', length: 1 }).default(1).notNull(),
	zipCode: nvarchar("zip_code", { length: 10 }).notNull(),
	street: nvarchar({ length: 255 }).notNull(),
	number: nvarchar({ length: 20 }).notNull(),
	complement: nvarchar({ length: 100 }),
	district: nvarchar({ length: 100 }).notNull(),
	cityCode: nvarchar("city_code", { length: 7 }).notNull(),
	cityName: nvarchar("city_name", { length: 100 }).notNull(),
	state: nvarchar({ length: 2 }).notNull(),
	timeZone: nvarchar("time_zone", { length: 50 }).default("America/Sao_Paulo"),
	logoUrl: nvarchar("logo_url", { length: 500 }),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	certificatePfx: nvarchar("certificate_pfx", { length: 'max' }),
	certificatePassword: nvarchar("certificate_password", { length: 255 }),
	certificateExpiry: datetime2("certificate_expiry", { mode: 'string', precision: 7 }),
	lastNsu: nvarchar("last_nsu", { mode: 'json', length: 15 }).default(0),
	environment: nvarchar({ length: 20 }).default("HOMOLOGATION"),
}, (table) => [
	primaryKey({ columns: [table.id], name: "branches_pkey"}),
	uniqueIndex("branches_document_org_idx").on(table.document, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const btgBoletos = mssqlTable("btg_boletos", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	nossoNumero: nvarchar("nosso_numero", { length: 20 }).notNull(),
	seuNumero: nvarchar("seu_numero", { length: 20 }),
	customerId: int("customer_id"),
	payerName: nvarchar("payer_name", { length: 255 }).notNull(),
	payerDocument: nvarchar("payer_document", { length: 18 }).notNull(),
	valorNominal: decimal("valor_nominal", { precision: 18, scale: 2 }).notNull(),
	valorDesconto: decimal("valor_desconto", { precision: 18, scale: 2 }),
	valorMulta: decimal("valor_multa", { precision: 18, scale: 2 }),
	valorJuros: decimal("valor_juros", { precision: 18, scale: 2 }),
	valorPago: decimal("valor_pago", { precision: 18, scale: 2 }),
	dataEmissao: datetime2("data_emissao", { mode: 'string', precision: 7 }).notNull(),
	dataVencimento: datetime2("data_vencimento", { mode: 'string', precision: 7 }).notNull(),
	dataPagamento: datetime2("data_pagamento", { mode: 'string', precision: 7 }),
	status: nvarchar({ length: 20 }).default("PENDING"),
	btgId: nvarchar("btg_id", { length: 50 }),
	linhaDigitavel: nvarchar("linha_digitavel", { length: 100 }),
	codigoBarras: nvarchar("codigo_barras", { length: 100 }),
	pdfUrl: nvarchar("pdf_url", { length: 500 }),
	accountsReceivableId: int("accounts_receivable_id"),
	billingInvoiceId: int("billing_invoice_id"),
	webhookReceivedAt: datetime2("webhook_received_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__btg_bole__3213E83F017D62CB"}),
]);

export const btgDdaAuthorized = mssqlTable("btg_dda_authorized", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	btgDdaId: nvarchar("btg_dda_id", { length: 100 }).notNull(),
	btgCompanyId: nvarchar("btg_company_id", { length: 50 }).notNull(),
	creditorName: nvarchar("creditor_name", { length: 255 }).notNull(),
	creditorDocument: nvarchar("creditor_document", { length: 18 }).notNull(),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	autoPayment: bit("auto_payment").default(false),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__btg_dda___3213E83F1D14674F"}),
	unique("UQ__btg_dda___0ECA570022F571CB").on(table.btgDdaId)
]);

export const btgDdaDebits = mssqlTable("btg_dda_debits", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	btgDebitId: nvarchar("btg_debit_id", { length: 100 }).notNull(),
	btgDdaId: nvarchar("btg_dda_id", { length: 100 }).notNull(),
	barcode: nvarchar({ length: 100 }),
	digitableLine: nvarchar("digitable_line", { length: 100 }),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	dueDate: datetime2("due_date", { mode: 'string', precision: 7 }).notNull(),
	creditorName: nvarchar("creditor_name", { length: 255 }),
	creditorDocument: nvarchar("creditor_document", { length: 18 }),
	description: nvarchar({ length: 500 }),
	status: nvarchar({ length: 20 }).default("PENDING"),
	accountsPayableId: int("accounts_payable_id"),
	importedAt: datetime2("imported_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	paidAt: datetime2("paid_at", { mode: 'string', precision: 7 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__btg_dda___3213E83F958CED4B"}),
	unique("UQ__btg_dda___7EC3A0172582EAAE").on(table.btgDebitId)
]);

export const btgPayments = mssqlTable("btg_payments", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	paymentType: nvarchar("payment_type", { length: 10 }).notNull(),
	beneficiaryName: nvarchar("beneficiary_name", { length: 255 }).notNull(),
	beneficiaryDocument: nvarchar("beneficiary_document", { length: 18 }).notNull(),
	beneficiaryBank: nvarchar("beneficiary_bank", { length: 10 }),
	beneficiaryAgency: nvarchar("beneficiary_agency", { length: 10 }),
	beneficiaryAccount: nvarchar("beneficiary_account", { length: 20 }),
	beneficiaryPixKey: nvarchar("beneficiary_pix_key", { length: 100 }),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	status: nvarchar({ length: 20 }).default("PENDING"),
	btgTransactionId: nvarchar("btg_transaction_id", { length: 50 }),
	errorMessage: nvarchar("error_message", { length: 500 }),
	scheduledDate: datetime2("scheduled_date", { mode: 'string', precision: 7 }),
	processedAt: datetime2("processed_at", { mode: 'string', precision: 7 }),
	accountsPayableId: int("accounts_payable_id"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__btg_paym__3213E83F353566F7"}),
]);

export const btgPixCharges = mssqlTable("btg_pix_charges", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	txid: nvarchar({ length: 50 }).notNull(),
	customerId: int("customer_id"),
	payerName: nvarchar("payer_name", { length: 255 }),
	payerDocument: nvarchar("payer_document", { length: 18 }),
	valor: decimal({ precision: 18, scale: 2 }).notNull(),
	chavePix: nvarchar("chave_pix", { length: 100 }),
	qrCode: nvarchar("qr_code", { length: 'max' }),
	qrCodeImageUrl: nvarchar("qr_code_image_url", { length: 500 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	dataCriacao: datetime2("data_criacao", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	dataExpiracao: datetime2("data_expiracao", { mode: 'string', precision: 7 }),
	dataPagamento: datetime2("data_pagamento", { mode: 'string', precision: 7 }),
	accountsReceivableId: int("accounts_receivable_id"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__btg_pix___3213E83FCBBB0C02"}),
	unique("UQ__btg_pix___E3BA953FA4BB524A").on(table.txid)
]);

export const businessPartners = mssqlTable("business_partners", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	type: nvarchar({ length: 20 }).notNull(),
	document: nvarchar({ length: 20 }).notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	tradeName: nvarchar("trade_name", { length: 255 }),
	email: nvarchar({ length: 255 }),
	phone: nvarchar({ length: 20 }),
	dataSource: nvarchar("data_source", { length: 20 }).default("MANUAL"),
	taxRegime: nvarchar("tax_regime", { length: 20 }).notNull(),
	ie: nvarchar({ length: 20 }),
	im: nvarchar({ length: 20 }),
	cClassTrib: nvarchar("c_class_trib", { length: 10 }),
	indIedest: nvarchar("ind_iedest", { mode: 'json', length: 1 }).default(9),
	zipCode: nvarchar("zip_code", { length: 10 }).notNull(),
	street: nvarchar({ length: 255 }).notNull(),
	number: nvarchar({ length: 20 }).notNull(),
	complement: nvarchar({ length: 100 }),
	district: nvarchar({ length: 100 }).notNull(),
	cityCode: nvarchar("city_code", { length: 7 }).notNull(),
	cityName: nvarchar("city_name", { length: 100 }).notNull(),
	state: nvarchar({ length: 2 }).notNull(),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
}, (table) => [
	primaryKey({ columns: [table.id], name: "business_partners_pkey"}),
	uniqueIndex("business_partners_document_org_idx").on(table.document, table.organizationId),
]);

export const carbonEmissions = mssqlTable("carbon_emissions", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	documentType: varchar("document_type", { length: 20 }).notNull(),
	documentId: int("document_id"),
	documentNumber: varchar("document_number", { length: 50 }),
	vehicleId: int("vehicle_id"),
	fuelType: varchar("fuel_type", { length: 20 }).default("DIESEL"),
	fuelConsumedLiters: decimal("fuel_consumed_liters", { precision: 10, scale: 2 }),
	distanceKm: decimal("distance_km", { precision: 10, scale: 2 }),
	fuelEfficiency: decimal("fuel_efficiency", { precision: 5, scale: 2 }),
	emissionFactor: decimal("emission_factor", { precision: 5, scale: 3, mode: 'number' }).default(2.600),
	co2EmissionKg: decimal("co2_emission_kg", { precision: 10, scale: 3 }),
	co2EmissionTons: decimal("co2_emission_tons", { precision: 10, scale: 6 }),
	customerId: int("customer_id"),
	customerName: varchar("customer_name", { length: 255 }),
	emissionDate: date("emission_date", { mode: 'string' }).notNull(),
	offsetStatus: varchar("offset_status", { length: 20 }).default("NONE"),
	offsetCertificateUrl: nvarchar("offset_certificate_url", { length: 'max' }),
	offsetProjectName: varchar("offset_project_name", { length: 255 }),
	offsetDate: date("offset_date", { mode: 'string' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__carbon_e__3213E83FCB495497"}),
	index("idx_carbon_date").on(table.emissionDate),
]);

export const cargoDocuments = mssqlTable("cargo_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	nfeInvoiceId: int("nfe_invoice_id").notNull().references(() => inboundInvoices.id),
	accessKey: nvarchar("access_key", { length: 44 }).notNull(),
	nfeNumber: nvarchar("nfe_number", { length: 50 }),
	nfeSeries: nvarchar("nfe_series", { length: 10 }),
	issuerCnpj: nvarchar("issuer_cnpj", { length: 14 }),
	issuerName: nvarchar("issuer_name", { length: 255 }),
	recipientCnpj: nvarchar("recipient_cnpj", { length: 14 }),
	recipientName: nvarchar("recipient_name", { length: 255 }),
	originUf: nvarchar("origin_uf", { length: 2 }),
	originCity: nvarchar("origin_city", { length: 100 }),
	destinationUf: nvarchar("destination_uf", { length: 2 }),
	destinationCity: nvarchar("destination_city", { length: 100 }),
	cargoValue: decimal("cargo_value", { precision: 18, scale: 2 }),
	weight: decimal({ precision: 10, scale: 3 }),
	volume: decimal({ precision: 10, scale: 3 }),
	status: nvarchar({ length: 20 }).default("PENDING").notNull(),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	deliveryDeadline: datetime2("delivery_deadline", { mode: 'string', precision: 7 }),
	tripId: int("trip_id"),
	cteId: int("cte_id"),
	hasExternalCte: nvarchar("has_external_cte", { length: 1 }).default("N"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cargo_do__3213E83F3951464B"}),
]);

export const chartAccountsAudit = mssqlTable("chart_accounts_audit", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	chartAccountId: int("chart_account_id").notNull(),
	operation: nvarchar({ length: 10 }).notNull(),
	oldCode: nvarchar("old_code", { length: 20 }),
	oldName: nvarchar("old_name", { length: 255 }),
	oldType: nvarchar("old_type", { length: 20 }),
	oldStatus: nvarchar("old_status", { length: 20 }),
	oldCategory: nvarchar("old_category", { length: 50 }),
	oldIsAnalytical: bit("old_is_analytical"),
	newCode: nvarchar("new_code", { length: 20 }),
	newName: nvarchar("new_name", { length: 255 }),
	newType: nvarchar("new_type", { length: 20 }),
	newStatus: nvarchar("new_status", { length: 20 }),
	newCategory: nvarchar("new_category", { length: 50 }),
	newIsAnalytical: bit("new_is_analytical"),
	changedBy: nvarchar("changed_by", { length: 255 }).notNull(),
	changedAt: datetime2("changed_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	reason: nvarchar({ length: 500 }),
	ipAddress: nvarchar("ip_address", { length: 50 }),
	userAgent: nvarchar("user_agent", { length: 500 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__chart_ac__3213E83F1491CEFE"}),
	index("IX_chart_accounts_audit_account").on(table.chartAccountId),
	index("IX_chart_accounts_audit_date").on(table.changedAt),
	index("IX_chart_accounts_audit_user").on(table.changedBy),
]);

export const chartOfAccounts = mssqlTable("chart_of_accounts", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 50 }).notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	description: nvarchar({ length: 'max' }),
	type: nvarchar({ length: 30 }).notNull(),
	category: nvarchar({ length: 50 }).notNull(),
	parentId: int("parent_id"),
	level: int().default(0),
	isAnalytical: nvarchar("is_analytical", { mode: 'json', length: 10 }).default(false),
	acceptsCostCenter: nvarchar("accepts_cost_center", { mode: 'json', length: 10 }).default(false),
	requiresCostCenter: nvarchar("requires_cost_center", { mode: 'json', length: 10 }).default(false),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__chart_of__3213E83F2F3E5506"}),
	foreignKey({
		columns: [table.parentId],
		foreignColumns: [table.id],
		name: "FK_chart_of_accounts_parent"
	}),
	index("idx_chart_of_accounts_category").on(table.category),
	uniqueIndex("idx_chart_of_accounts_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
	index("idx_chart_of_accounts_parent").on(table.parentId),
	index("idx_chart_of_accounts_type").on(table.type),
]);

export const ciapControl = mssqlTable("ciap_control", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	assetId: int("asset_id").notNull(),
	assetDescription: varchar("asset_description", { length: 255 }),
	purchaseDate: date("purchase_date", { mode: 'string' }).notNull(),
	purchaseAmount: decimal("purchase_amount", { precision: 15, scale: 2 }).notNull(),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2 }).notNull(),
	icmsTotalCredit: decimal("icms_total_credit", { precision: 15, scale: 2 }).notNull(),
	totalInstallments: int("total_installments").default(48),
	monthlyInstallment: decimal("monthly_installment", { precision: 15, scale: 2 }).notNull(),
	appropriationStartDate: date("appropriation_start_date", { mode: 'string' }).notNull(),
	installmentsAppropriated: int("installments_appropriated").default(0),
	totalAppropriated: decimal("total_appropriated", { precision: 15, scale: 2, mode: 'number' }).default(0),
	balanceToAppropriate: decimal("balance_to_appropriate", { precision: 15, scale: 2 }),
	status: varchar({ length: 20 }).default("ACTIVE"),
	completedAt: date("completed_at", { mode: 'string' }),
	cancellationReason: nvarchar("cancellation_reason", { length: 'max' }),
	lastSpedGGeneration: date("last_sped_g_generation", { mode: 'string' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__ciap_con__3213E83FEF64991F"}),
	index("idx_ciap_asset").on(table.assetId),
]);

export const ciapMonthlyAppropriation = mssqlTable("ciap_monthly_appropriation", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	ciapControlId: int("ciap_control_id").notNull(),
	referenceMonth: date("reference_month", { mode: 'string' }).notNull(),
	totalRevenue: decimal("total_revenue", { precision: 15, scale: 2 }).notNull(),
	taxableRevenue: decimal("taxable_revenue", { precision: 15, scale: 2 }).notNull(),
	exemptRevenue: decimal("exempt_revenue", { precision: 15, scale: 2, mode: 'number' }).default(0),
	appropriationFactor: decimal("appropriation_factor", { precision: 5, scale: 4 }).notNull(),
	installmentBase: decimal("installment_base", { precision: 15, scale: 2 }).notNull(),
	appropriatedAmount: decimal("appropriated_amount", { precision: 15, scale: 2 }).notNull(),
	journalEntryId: int("journal_entry_id"),
	accountingPosted: bit("accounting_posted").default(false),
	spedGenerated: bit("sped_generated").default(false),
	spedLine: nvarchar("sped_line", { length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__ciap_mon__3213E83F73BD06E1"}),
]);

export const claimsManagement = mssqlTable("claims_management", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	claimNumber: varchar("claim_number", { length: 50 }).notNull(),
	claimDate: date("claim_date", { mode: 'string' }).notNull(),
	claimType: varchar("claim_type", { length: 50 }).notNull(),
	assetType: varchar("asset_type", { length: 50 }),
	vehicleId: int("vehicle_id"),
	assetDescription: nvarchar("asset_description", { length: 'max' }),
	estimatedDamage: decimal("estimated_damage", { precision: 15, scale: 2 }),
	franchiseAmount: decimal("franchise_amount", { precision: 15, scale: 2 }),
	insuranceCoverage: decimal("insurance_coverage", { precision: 15, scale: 2 }),
	deductibleAmount: decimal("deductible_amount", { precision: 15, scale: 2 }),
	insuranceCompany: varchar("insurance_company", { length: 255 }),
	policyNumber: varchar("policy_number", { length: 100 }),
	claimStatus: varchar("claim_status", { length: 30 }).default("OPENED"),
	thirdPartyFault: bit("third_party_fault").default(false),
	thirdPartyName: varchar("third_party_name", { length: 255 }),
	thirdPartyInsurance: varchar("third_party_insurance", { length: 255 }),
	recoverableFromThird: decimal("recoverable_from_third", { precision: 15, scale: 2 }),
	franchisePosted: bit("franchise_posted").default(false),
	franchiseJournalEntryId: int("franchise_journal_entry_id"),
	receivablePosted: bit("receivable_posted").default(false),
	receivableJournalEntryId: int("receivable_journal_entry_id"),
	incomePosted: bit("income_posted").default(false),
	incomeJournalEntryId: int("income_journal_entry_id"),
	policeReportNumber: varchar("police_report_number", { length: 100 }),
	reportedBy: int("reported_by"),
	handledBy: int("handled_by"),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__claims_m__3213E83FA142E624"}),
	index("idx_claims_status").on(table.claimStatus),
	unique("UQ__claims_m__8DF9683D7A68DBBC").on(table.claimNumber)
]);

export const comprasEntradaItem = mssqlTable("compras_entrada_item", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	idHeader: bigint("id_header", { mode: 'number' }).notNull(),
	descricaoProduto: nvarchar("descricao_produto", { length: 255 }).notNull(),
	ncmUtilizado: nvarchar("ncm_utilizado", { length: 10 }).notNull(),
	idPcgItem: int("id_pcg_item").notNull().references(() => managementChartOfAccounts.id),
	idCentroCustoAplicacao: int("id_centro_custo_aplicacao").notNull().references(() => costCenters.id),
	quantidade: decimal({ precision: 12, scale: 4 }).notNull(),
	valorUnitario: decimal("valor_unitario", { precision: 15, scale: 4 }).notNull(),
	valorTotalItem: decimal("valor_total_item", { precision: 15, scale: 2 }).notNull(),
	isMonofasico: bit("is_monofasico").default(false),
	isIcmsSt: bit("is_icms_st").default(false),
	isIcmsDiferimento: bit("is_icms_diferimento").default(false),
	isIpiSuspenso: bit("is_ipi_suspenso").default(false),
	valorIcms: decimal("valor_icms", { precision: 15, scale: 2 }),
	valorIpi: decimal("valor_ipi", { precision: 15, scale: 2 }),
	valorPis: decimal("valor_pis", { precision: 15, scale: 2 }),
	valorCofins: decimal("valor_cofins", { precision: 15, scale: 2 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__compras___3213E83F64C59754"}),
	index("idx_header").on(table.idHeader),
	index("idx_ncm").on(table.ncmUtilizado),
	index("idx_pcg_cc").on(table.idPcgItem, table.idCentroCustoAplicacao),
]);

export const costAllocationRules = mssqlTable("cost_allocation_rules", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	ruleName: varchar("rule_name", { length: 255 }).notNull(),
	sourceAccountId: int("source_account_id"),
	sourceCostCenterId: int("source_cost_center_id"),
	allocationMethod: varchar("allocation_method", { length: 50 }).notNull(),
	allocationFrequency: varchar("allocation_frequency", { length: 20 }).default("MONTHLY"),
	isActive: bit("is_active").default(true),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cost_all__3213E83FE151D764"}),
]);

export const costAllocationTargets = mssqlTable("cost_allocation_targets", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	allocationRuleId: int("allocation_rule_id").notNull(),
	targetCostCenterId: int("target_cost_center_id").notNull(),
	allocationPercentage: decimal("allocation_percentage", { precision: 5, scale: 2 }),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cost_all__3213E83F767484E7"}),
]);

export const costCenterApprovers = mssqlTable("cost_center_approvers", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	costCenterId: int("cost_center_id").notNull(),
	approverRole: varchar("approver_role", { length: 100 }).notNull(),
	approverName: varchar("approver_name", { length: 255 }),
	approvalLimit: decimal("approval_limit", { precision: 15, scale: 2 }),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cost_cen__3213E83F19691EBC"}),
]);

export const costCenters = mssqlTable("cost_centers", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 50 }).notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	description: nvarchar({ length: 'max' }),
	type: nvarchar({ length: 20 }).notNull(),
	parentId: int("parent_id"),
	level: int().default(0),
	isAnalytical: nvarchar("is_analytical", { mode: 'json', length: 10 }).default(false),
	linkedVehicleId: int("linked_vehicle_id").references(() => vehicles.id),
	linkedPartnerId: int("linked_partner_id").references(() => businessPartners.id),
	linkedBranchId: int("linked_branch_id").references(() => branches.id),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	class: nvarchar({ length: 20 }).default("BOTH"),
	serviceType: nvarchar("service_type", { length: 50 }),
	linkedObjectType: nvarchar("linked_object_type", { length: 50 }),
	linkedObjectId: int("linked_object_id"),
	assetType: nvarchar("asset_type", { length: 50 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cost_cen__3213E83F261DAD28"}),
	foreignKey({
		columns: [table.parentId],
		foreignColumns: [table.id],
		name: "FK_cost_centers_parent"
	}),
	uniqueIndex("idx_cost_centers_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
	index("idx_cost_centers_parent").on(table.parentId),
	index("idx_cost_centers_vehicle").on(table.linkedVehicleId),
]);

export const costCentersAudit = mssqlTable("cost_centers_audit", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	costCenterId: int("cost_center_id").notNull(),
	operation: nvarchar({ length: 10 }).notNull(),
	oldCode: nvarchar("old_code", { length: 20 }),
	oldName: nvarchar("old_name", { length: 255 }),
	oldType: nvarchar("old_type", { length: 20 }),
	oldStatus: nvarchar("old_status", { length: 20 }),
	oldClass: nvarchar("old_class", { length: 20 }),
	newCode: nvarchar("new_code", { length: 20 }),
	newName: nvarchar("new_name", { length: 255 }),
	newType: nvarchar("new_type", { length: 20 }),
	newStatus: nvarchar("new_status", { length: 20 }),
	newClass: nvarchar("new_class", { length: 20 }),
	changedBy: nvarchar("changed_by", { length: 255 }).notNull(),
	changedAt: datetime2("changed_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	reason: nvarchar({ length: 500 }),
	ipAddress: nvarchar("ip_address", { length: 50 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cost_cen__3213E83FB5A0EB76"}),
	index("IX_cost_centers_audit_center").on(table.costCenterId),
	index("IX_cost_centers_audit_date").on(table.changedAt),
]);

export const cteCargoDocuments = mssqlTable("cte_cargo_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	cteHeaderId: int("cte_header_id").notNull(),
	documentType: nvarchar("document_type", { length: 10 }).default("NFE"),
	documentKey: nvarchar("document_key", { length: 44 }),
	documentNumber: nvarchar("document_number", { length: 20 }),
	documentSerie: nvarchar("document_serie", { length: 3 }),
	documentDate: datetime2("document_date", { mode: 'string', precision: 7 }),
	documentValue: decimal("document_value", { precision: 18, scale: 2 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	sourceCargoId: int("source_cargo_id"),
	sourceInvoiceId: int("source_invoice_id"),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cte_carg__3213E83F008E79FF"}),
	index("idx_cte_cargo_source_cargo").on(table.sourceCargoId),
]);

export const cteHeader = mssqlTable("cte_header", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	cteNumber: int("cte_number").notNull(),
	serie: nvarchar({ mode: 'json', length: 3 }).default(1),
	model: nvarchar({ mode: 'json', length: 2 }).default(57),
	cteKey: nvarchar("cte_key", { length: 44 }),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	pickupOrderId: int("pickup_order_id"),
	tripId: int("trip_id"),
	senderId: int("sender_id"),
	recipientId: int("recipient_id"),
	shipperId: int("shipper_id"),
	receiverId: int("receiver_id"),
	takerId: int("taker_id").notNull(),
	takerType: nvarchar("taker_type", { length: 20 }),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	originCityId: int("origin_city_id"),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	destinationCityId: int("destination_city_id"),
	serviceValue: decimal("service_value", { precision: 18, scale: 2 }).notNull(),
	cargoValue: decimal("cargo_value", { precision: 18, scale: 2 }),
	totalValue: decimal("total_value", { precision: 18, scale: 2 }).notNull(),
	receivableValue: decimal("receivable_value", { precision: 18, scale: 2 }),
	icmsBase: decimal("icms_base", { precision: 18, scale: 2 }),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2 }),
	icmsValue: decimal("icms_value", { precision: 18, scale: 2 }),
	icmsReduction: decimal("icms_reduction", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	insurancePolicy: nvarchar("insurance_policy", { length: 50 }).notNull(),
	insuranceCertificate: nvarchar("insurance_certificate", { length: 50 }).notNull(),
	insuranceCompany: nvarchar("insurance_company", { length: 200 }),
	modal: nvarchar({ length: 2 }).default("01"),
	status: nvarchar({ length: 20 }).default("DRAFT"),
	protocolNumber: nvarchar("protocol_number", { length: 20 }),
	authorizationDate: datetime2("authorization_date", { mode: 'string', precision: 7 }),
	cancellationDate: datetime2("cancellation_date", { mode: 'string', precision: 7 }),
	cancellationReason: nvarchar("cancellation_reason", { length: 500 }),
	xmlSigned: nvarchar("xml_signed", { length: 'max' }),
	xmlAuthorized: nvarchar("xml_authorized", { length: 'max' }),
	rejectionCode: nvarchar("rejection_code", { length: 10 }),
	rejectionMessage: nvarchar("rejection_message", { length: 500 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	externalEmitter: nvarchar("external_emitter", { length: 255 }),
	importedAt: datetime2("imported_at", { mode: 'string', precision: 7 }),
	cteOrigin: nvarchar("cte_origin", { length: 20 }).default("INTERNAL").notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cte_head__3213E83FF51921E4"}),
	index("idx_cte_header_imported").on(table.importedAt),
]);

export const cteValueComponents = mssqlTable("cte_value_components", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	cteHeaderId: int("cte_header_id").notNull(),
	componentName: nvarchar("component_name", { length: 50 }),
	componentValue: decimal("component_value", { precision: 18, scale: 2 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__cte_valu__3213E83F699A54D0"}),
]);

export const driverDocuments = mssqlTable("driver_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	driverId: int("driver_id").notNull().references(() => drivers.id),
	documentType: nvarchar("document_type", { length: 50 }).notNull(),
	documentNumber: nvarchar("document_number", { length: 100 }),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }),
	expiryDate: datetime2("expiry_date", { mode: 'string', precision: 7 }).notNull(),
	cnhCategory: nvarchar("cnh_category", { length: 5 }),
	fileUrl: nvarchar("file_url", { length: 500 }),
	status: nvarchar({ length: 20 }).default("VALID"),
	alertSentAt: datetime2("alert_sent_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__driver_d__3213E83FE9D86AB8"}),
	index("idx_driver_docs_expiry").on(table.expiryDate, table.status),
]);

export const driverPerformanceConfig = mssqlTable("driver_performance_config", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	configName: varchar("config_name", { length: 255 }).notNull(),
	kmBonusEnabled: bit("km_bonus_enabled").default(false),
	kmBonusPerUnit: decimal("km_bonus_per_unit", { precision: 10, scale: 4 }),
	kmMinimumThreshold: int("km_minimum_threshold"),
	fuelBonusEnabled: bit("fuel_bonus_enabled").default(false),
	fuelTargetAverage: decimal("fuel_target_average", { precision: 5, scale: 2 }),
	fuelBonusPercentage: decimal("fuel_bonus_percentage", { precision: 5, scale: 2 }),
	dangerousCargoBonus: bit("dangerous_cargo_bonus").default(false),
	dangerousCargoPercentage: decimal("dangerous_cargo_percentage", { precision: 5, scale: 2, mode: 'number' }).default(30.00),
	unhealthyBonus: bit("unhealthy_bonus").default(false),
	unhealthyPercentage: decimal("unhealthy_percentage", { precision: 5, scale: 2, mode: 'number' }).default(20.00),
	isActive: bit("is_active").default(true),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__driver_p__3213E83F3EF13142"}),
]);

export const driverWorkJourney = mssqlTable("driver_work_journey", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	driverId: int("driver_id").notNull(),
	vehicleId: int("vehicle_id"),
	journeyDate: date("journey_date", { mode: 'string' }).notNull(),
	startedAt: datetime("started_at", { mode: 'string' }),
	finishedAt: datetime("finished_at", { mode: 'string' }),
	totalDrivingHours: decimal("total_driving_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	totalRestHours: decimal("total_rest_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	totalWaitingHours: decimal("total_waiting_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	exceededMaxDriving: bit("exceeded_max_driving").default(false),
	insufficientRest: bit("insufficient_rest").default(false),
	regularHours: decimal("regular_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	overtime50: decimal("overtime_50", { precision: 5, scale: 2, mode: 'number' }).default(0),
	overtime100: decimal("overtime_100", { precision: 5, scale: 2, mode: 'number' }).default(0),
	nightHours: decimal("night_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	waitingHours: decimal("waiting_hours", { precision: 5, scale: 2, mode: 'number' }).default(0),
	baseSalaryDay: decimal("base_salary_day", { precision: 10, scale: 2 }),
	waitingAmount: decimal("waiting_amount", { precision: 10, scale: 2 }),
	overtimeAmount: decimal("overtime_amount", { precision: 10, scale: 2 }),
	nightAmount: decimal("night_amount", { precision: 10, scale: 2 }),
	trackingMacroId: varchar("tracking_macro_id", { length: 100 }),
	processed: bit().default(false),
	processedAt: datetime("processed_at", { mode: 'string' }),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__driver_w__3213E83F6E79E802"}),
	index("idx_driver_journey_date").on(table.driverId, table.journeyDate),
]);

export const drivers = mssqlTable("drivers", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 255 }).notNull(),
	cpf: nvarchar({ length: 14 }).notNull(),
	phone: nvarchar({ length: 20 }),
	email: nvarchar({ length: 255 }),
	cnhNumber: nvarchar("cnh_number", { length: 20 }).notNull(),
	cnhCategory: nvarchar("cnh_category", { length: 5 }).notNull(),
	cnhExpiry: datetime2("cnh_expiry", { mode: 'string', precision: 7 }).notNull(),
	cnhIssueDate: datetime2("cnh_issue_date", { mode: 'string', precision: 7 }),
	partnerId: int("partner_id").references(() => businessPartners.id),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__drivers__3213E83F42456EC1"}),
	uniqueIndex("idx_drivers_cpf_org").on(table.cpf, table.organizationId).where(sql`([deleted_at] IS NULL)`),
	index("idx_drivers_org").on(table.organizationId),
	index("idx_drivers_status").on(table.status),
]);

export const externalCtes = mssqlTable("external_ctes", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	branchId: int("branch_id").notNull().references(() => branches.id),
	accessKey: nvarchar("access_key", { length: 44 }).notNull(),
	cteNumber: nvarchar("cte_number", { length: 20 }),
	series: nvarchar({ length: 10 }),
	model: nvarchar({ mode: 'json', length: 2 }).default(57),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	issuerCnpj: nvarchar("issuer_cnpj", { length: 14 }).notNull(),
	issuerName: nvarchar("issuer_name", { length: 255 }).notNull(),
	issuerIe: nvarchar("issuer_ie", { length: 20 }),
	senderCnpj: nvarchar("sender_cnpj", { length: 14 }),
	senderName: nvarchar("sender_name", { length: 255 }),
	recipientCnpj: nvarchar("recipient_cnpj", { length: 14 }),
	recipientName: nvarchar("recipient_name", { length: 255 }),
	shipperCnpj: nvarchar("shipper_cnpj", { length: 14 }),
	shipperName: nvarchar("shipper_name", { length: 255 }),
	receiverCnpj: nvarchar("receiver_cnpj", { length: 14 }),
	receiverName: nvarchar("receiver_name", { length: 255 }),
	originCity: nvarchar("origin_city", { length: 100 }),
	originUf: nvarchar("origin_uf", { length: 2 }),
	destinationCity: nvarchar("destination_city", { length: 100 }),
	destinationUf: nvarchar("destination_uf", { length: 2 }),
	totalValue: decimal("total_value", { precision: 18, scale: 2 }),
	cargoValue: decimal("cargo_value", { precision: 18, scale: 2 }),
	icmsValue: decimal("icms_value", { precision: 18, scale: 2 }),
	weight: decimal({ precision: 10, scale: 3 }),
	volume: decimal({ precision: 10, scale: 3 }),
	linkedNfeKey: nvarchar("linked_nfe_key", { length: 44 }),
	cargoDocumentId: int("cargo_document_id").references(() => cargoDocuments.id),
	xmlContent: nvarchar("xml_content", { length: 'max' }),
	xmlHash: nvarchar("xml_hash", { length: 64 }),
	status: nvarchar({ length: 20 }).default("IMPORTED"),
	importSource: nvarchar("import_source", { length: 50 }).default("SEFAZ_AUTO"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__external__3213E83F1187201D"}),
	index("idx_external_ctes_access_key").on(table.accessKey),
	index("idx_external_ctes_cargo_document_id").on(table.cargoDocumentId),
	index("idx_external_ctes_linked_nfe_key").on(table.linkedNfeKey),
]);

export const financialCategories = mssqlTable("financial_categories", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	name: nvarchar({ length: 255 }).notNull(),
	code: nvarchar({ length: 50 }),
	type: nvarchar({ length: 20 }).notNull(),
	description: nvarchar({ length: 'max' }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	codigoEstruturado: nvarchar("codigo_estruturado", { length: 20 }),
	tipoMovimento: nvarchar("tipo_movimento", { length: 20 }),
	grupoDfc: nvarchar("grupo_dfc", { length: 20 }),
	permiteLancamento: bit("permite_lancamento").default(true),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__financia__3213E83F33C17CCB"}),
	index("idx_financial_categories_org").on(table.organizationId),
	index("idx_financial_categories_type").on(table.type),
]);

export const financialCategoriesAudit = mssqlTable("financial_categories_audit", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	categoryId: int("category_id").notNull(),
	operation: nvarchar({ length: 10 }).notNull(),
	oldName: nvarchar("old_name", { length: 255 }),
	oldCode: nvarchar("old_code", { length: 50 }),
	oldType: nvarchar("old_type", { length: 20 }),
	oldStatus: nvarchar("old_status", { length: 20 }),
	newName: nvarchar("new_name", { length: 255 }),
	newCode: nvarchar("new_code", { length: 50 }),
	newType: nvarchar("new_type", { length: 20 }),
	newStatus: nvarchar("new_status", { length: 20 }),
	changedBy: nvarchar("changed_by", { length: 255 }).notNull(),
	changedAt: datetime2("changed_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	reason: nvarchar({ length: 500 }),
	ipAddress: nvarchar("ip_address", { length: 50 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__financia__3213E83F0B08E027"}),
	index("IX_financial_categories_audit_category").on(table.categoryId),
	index("IX_financial_categories_audit_date").on(table.changedAt),
]);

export const financialDdaInbox = mssqlTable("financial_dda_inbox", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	bankAccountId: int("bank_account_id").notNull(),
	externalId: nvarchar("external_id", { length: 255 }).notNull(),
	beneficiaryName: nvarchar("beneficiary_name", { length: 255 }).notNull(),
	beneficiaryDocument: nvarchar("beneficiary_document", { length: 20 }).notNull(),
	amount: decimal({ precision: 18, scale: 2 }).notNull(),
	dueDate: datetime2("due_date", { mode: 'string', precision: 7 }).notNull(),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }),
	barcode: nvarchar({ length: 100 }).notNull(),
	digitableLine: nvarchar("digitable_line", { length: 100 }),
	status: nvarchar({ length: 20 }).default("PENDING"),
	matchedPayableId: int("matched_payable_id"),
	matchScore: int("match_score").default(0),
	notes: nvarchar({ length: 'max' }),
	dismissedReason: nvarchar("dismissed_reason", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__financia__3213E83F46A32882"}),
]);

export const financialTransactions = mssqlTable("financial_transactions", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: bigint("organization_id", { mode: 'number' }).notNull(),
	branchId: bigint("branch_id", { mode: 'number' }).notNull(),
	transactionType: varchar("transaction_type", { length: 20 }).notNull(),
	payableId: bigint("payable_id", { mode: 'number' }),
	receivableId: bigint("receivable_id", { mode: 'number' }),
	transactionDate: datetime("transaction_date", { mode: 'string' }).notNull(),
	paymentMethod: varchar("payment_method", { length: 50 }).notNull(),
	bankAccountId: bigint("bank_account_id", { mode: 'number' }),
	originalAmount: decimal("original_amount", { precision: 18, scale: 2 }).notNull(),
	interestAmount: decimal("interest_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	fineAmount: decimal("fine_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	discountAmount: decimal("discount_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	iofAmount: decimal("iof_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	bankFeeAmount: decimal("bank_fee_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	otherFeesAmount: decimal("other_fees_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	netAmount: decimal("net_amount", { precision: 18, scale: 2 }).notNull(),
	journalEntryId: bigint("journal_entry_id", { mode: 'number' }),
	reconciledAt: datetime("reconciled_at", { mode: 'string' }),
	reconciledBy: bigint("reconciled_by", { mode: 'number' }),
	bankStatementId: bigint("bank_statement_id", { mode: 'number' }),
	notes: nvarchar({ length: 'max' }),
	documentNumber: varchar("document_number", { length: 50 }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate().notNull(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate().notNull(),
	deletedAt: datetime("deleted_at", { mode: 'string' }),
	createdBy: bigint("created_by", { mode: 'number' }).notNull(),
	updatedBy: bigint("updated_by", { mode: 'number' }).notNull(),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__financia__3213E83FAEED6E05"}),
	index("idx_financial_transactions_date").on(table.transactionDate),
	index("idx_financial_transactions_org_branch").on(table.organizationId, table.branchId),
	index("idx_financial_transactions_payable").on(table.payableId),
	index("idx_financial_transactions_receivable").on(table.receivableId),
]);

export const fiscalDocumentItems = mssqlTable("fiscal_document_items", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	fiscalDocumentId: bigint("fiscal_document_id", { mode: 'number' }).notNull().references(() => fiscalDocuments.id),
	organizationId: bigint("organization_id", { mode: 'number' }).notNull(),
	itemNumber: int("item_number").notNull(),
	productId: bigint("product_id", { mode: 'number' }),
	ncmCode: varchar("ncm_code", { length: 10 }),
	description: varchar({ length: 500 }).notNull(),
	additionalInfo: nvarchar("additional_info", { length: 'max' }),
	quantity: decimal({ precision: 18, scale: 4 }).notNull(),
	unit: varchar({ length: 10 }).notNull(),
	unitPrice: decimal("unit_price", { precision: 18, scale: 6 }).notNull(),
	grossAmount: decimal("gross_amount", { precision: 18, scale: 2 }).notNull(),
	discountAmount: decimal("discount_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	netAmount: decimal("net_amount", { precision: 18, scale: 2 }).notNull(),
	icmsAmount: decimal("icms_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	ipiAmount: decimal("ipi_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	ipiRate: decimal("ipi_rate", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	pisAmount: decimal("pis_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	pisRate: decimal("pis_rate", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	cofinsAmount: decimal("cofins_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	cofinsRate: decimal("cofins_rate", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	cfop: varchar({ length: 4 }),
	cstIcms: varchar("cst_icms", { length: 3 }),
	cstPis: varchar("cst_pis", { length: 2 }),
	cstCofins: varchar("cst_cofins", { length: 2 }),
	chartAccountId: bigint("chart_account_id", { mode: 'number' }),
	categoryId: bigint("category_id", { mode: 'number' }),
	costCenterId: bigint("cost_center_id", { mode: 'number' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate().notNull(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate().notNull(),
	deletedAt: datetime("deleted_at", { mode: 'string' }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__fiscal_d__3213E83F7448343B"}),
	index("idx_fiscal_document_items_doc").on(table.fiscalDocumentId),
	index("idx_fiscal_document_items_ncm").on(table.ncmCode),
	index("idx_fiscal_document_items_product").on(table.productId),
]);

export const fiscalDocuments = mssqlTable("fiscal_documents", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: bigint("organization_id", { mode: 'number' }).notNull(),
	branchId: bigint("branch_id", { mode: 'number' }).notNull(),
	documentType: varchar("document_type", { length: 20 }).notNull(),
	documentNumber: varchar("document_number", { length: 50 }).notNull(),
	documentSeries: varchar("document_series", { length: 10 }),
	accessKey: varchar("access_key", { length: 44 }),
	partnerId: bigint("partner_id", { mode: 'number' }),
	partnerDocument: varchar("partner_document", { length: 18 }),
	partnerName: varchar("partner_name", { length: 200 }),
	issueDate: datetime("issue_date", { mode: 'string' }).notNull(),
	entryDate: datetime("entry_date", { mode: 'string' }),
	dueDate: datetime("due_date", { mode: 'string' }),
	grossAmount: decimal("gross_amount", { precision: 18, scale: 2 }).notNull(),
	taxAmount: decimal("tax_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	netAmount: decimal("net_amount", { precision: 18, scale: 2 }).notNull(),
	fiscalClassification: varchar("fiscal_classification", { length: 50 }),
	cfop: varchar({ length: 4 }),
	operationType: varchar("operation_type", { length: 20 }),
	fiscalStatus: varchar("fiscal_status", { length: 30 }).default("IMPORTED").notNull(),
	accountingStatus: varchar("accounting_status", { length: 30 }).default("PENDING").notNull(),
	financialStatus: varchar("financial_status", { length: 30 }).default("NO_TITLE").notNull(),
	journalEntryId: bigint("journal_entry_id", { mode: 'number' }),
	xmlContent: nvarchar("xml_content", { length: 'max' }),
	xmlHash: varchar("xml_hash", { length: 64 }),
	pdfUrl: varchar("pdf_url", { length: 500 }),
	notes: nvarchar({ length: 'max' }),
	internalNotes: nvarchar("internal_notes", { length: 'max' }),
	editable: bit().default(true).notNull(),
	importedFrom: varchar("imported_from", { length: 50 }),
	postedAt: datetime("posted_at", { mode: 'string' }),
	postedBy: bigint("posted_by", { mode: 'number' }),
	reversedAt: datetime("reversed_at", { mode: 'string' }),
	reversedBy: bigint("reversed_by", { mode: 'number' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate().notNull(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate().notNull(),
	deletedAt: datetime("deleted_at", { mode: 'string' }),
	createdBy: bigint("created_by", { mode: 'number' }).notNull(),
	updatedBy: bigint("updated_by", { mode: 'number' }).notNull(),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__fiscal_d__3213E83F4B208136"}),
	index("idx_fiscal_documents_access_key").on(table.accessKey),
	uniqueIndex("idx_fiscal_documents_access_key_unique").on(table.accessKey).where(sql`([access_key] IS NOT NULL AND [deleted_at] IS NULL)`),
	index("idx_fiscal_documents_issue_date").on(table.issueDate),
	index("idx_fiscal_documents_org_branch").on(table.organizationId, table.branchId),
	index("idx_fiscal_documents_partner").on(table.partnerId),
	index("idx_fiscal_documents_status").on(table.accountingStatus, table.financialStatus),
]);

export const fiscalSettings = mssqlTable("fiscal_settings", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	nfeEnvironment: nvarchar("nfe_environment", { length: 20 }).default("production").notNull(),
	cteEnvironment: nvarchar("cte_environment", { length: 20 }).default("homologacao").notNull(),
	cteSeries: nvarchar("cte_series", { mode: 'json', length: 3 }).default(1),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	version: int().default(1).notNull(),
	autoImportEnabled: nvarchar("auto_import_enabled", { length: 1 }).default("S"),
	autoImportInterval: int("auto_import_interval").default(1),
	lastAutoImport: datetime2("last_auto_import", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__fiscal_s__3213E83F6C7FC33D"}),
	index("idx_fiscal_settings_org_branch").on(table.organizationId, table.branchId),
]);

export const fiscalTaxMatrix = mssqlTable("fiscal_tax_matrix", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	ufOrigin: varchar("uf_origin", { length: 2 }).notNull(),
	ufDestination: varchar("uf_destination", { length: 2 }).notNull(),
	cargoType: varchar("cargo_type", { length: 50 }).default("GERAL"),
	isIcmsContributor: bit("is_icms_contributor").default(true),
	cstCode: varchar("cst_code", { length: 3 }).notNull(),
	cstDescription: varchar("cst_description", { length: 255 }),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2 }).notNull(),
	fcpRate: decimal("fcp_rate", { precision: 5, scale: 2, mode: 'number' }).default(0),
	difalApplicable: bit("difal_applicable").default(false),
	difalOriginPercentage: decimal("difal_origin_percentage", { precision: 5, scale: 2, mode: 'number' }).default(0),
	difalDestinationPercentage: decimal("difal_destination_percentage", { precision: 5, scale: 2, mode: 'number' }).default(0),
	taxBenefitCode: varchar("tax_benefit_code", { length: 50 }),
	taxBenefitDescription: nvarchar("tax_benefit_description", { length: 'max' }),
	requiresSt: bit("requires_st").default(false),
	isActive: bit("is_active").default(true),
	validFrom: date("valid_from", { mode: 'string' }),
	validUntil: date("valid_until", { mode: 'string' }),
	legalBasis: nvarchar("legal_basis", { length: 'max' }),
	businessRule: nvarchar("business_rule", { length: 'max' }),
	alertMessage: nvarchar("alert_message", { length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__fiscal_t__3213E83FF7E0DA19"}),
	index("idx_tax_matrix_route").on(table.ufOrigin, table.ufDestination),
]);

export const fiscalValidationLog = mssqlTable("fiscal_validation_log", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	documentType: varchar("document_type", { length: 20 }).notNull(),
	documentNumber: varchar("document_number", { length: 50 }),
	documentId: int("document_id"),
	validationType: varchar("validation_type", { length: 50 }).notNull(),
	validationStatus: varchar("validation_status", { length: 20 }).notNull(),
	ufOrigin: varchar("uf_origin", { length: 2 }),
	ufDestination: varchar("uf_destination", { length: 2 }),
	cargoType: varchar("cargo_type", { length: 50 }),
	ruleFound: bit("rule_found").default(false),
	icmsRateApplied: decimal("icms_rate_applied", { precision: 5, scale: 2 }),
	fcpRateApplied: decimal("fcp_rate_applied", { precision: 5, scale: 2 }),
	cstApplied: varchar("cst_applied", { length: 3 }),
	warningMessage: nvarchar("warning_message", { length: 'max' }),
	errorMessage: nvarchar("error_message", { length: 'max' }),
	suggestedAction: nvarchar("suggested_action", { length: 'max' }),
	userId: int("user_id"),
	userOverride: bit("user_override").default(false),
	overrideJustification: nvarchar("override_justification", { length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__fiscal_v__3213E83F8AF31966"}),
]);

export const freightExtraComponents = mssqlTable("freight_extra_components", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	freightTableId: int("freight_table_id").notNull().references(() => freightTables.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 100 }).notNull(),
	code: nvarchar({ length: 50 }),
	type: nvarchar({ length: 30 }).notNull(),
	value: decimal({ precision: 18, scale: 2 }).notNull(),
	minValue: decimal("min_value", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	maxValue: decimal("max_value", { precision: 18, scale: 2 }),
	isActive: nvarchar("is_active", { mode: 'json', length: 10 }).default(true),
	applyOrder: int("apply_order").default(0),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83FFEC88BA3"}),
	index("idx_freight_extra_components_table").on(table.freightTableId),
]);

export const freightGeneralities = mssqlTable("freight_generalities", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	freightTableId: int("freight_table_id").notNull().references(() => freightTables.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 100 }).notNull(),
	code: nvarchar({ length: 50 }),
	type: nvarchar({ length: 30 }).notNull(),
	value: decimal({ precision: 18, scale: 2 }).notNull(),
	minValue: decimal("min_value", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	maxValue: decimal("max_value", { precision: 18, scale: 2 }),
	incidence: nvarchar({ length: 30 }).default("ALWAYS"),
	isActive: nvarchar("is_active", { mode: 'json', length: 10 }).default(true),
	applyOrder: int("apply_order").default(0),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83FB806ACB2"}),
	index("idx_freight_generalities_table").on(table.freightTableId),
]);

export const freightQuotes = mssqlTable("freight_quotes", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	quoteNumber: nvarchar("quote_number", { length: 20 }).notNull(),
	customerId: int("customer_id").notNull(),
	contactName: nvarchar("contact_name", { length: 100 }),
	contactPhone: nvarchar("contact_phone", { length: 20 }),
	contactEmail: nvarchar("contact_email", { length: 100 }),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	originCityId: int("origin_city_id"),
	originAddress: nvarchar("origin_address", { length: 500 }),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	destinationCityId: int("destination_city_id"),
	destinationAddress: nvarchar("destination_address", { length: 500 }),
	cargoDescription: nvarchar("cargo_description", { length: 500 }),
	weightKg: decimal("weight_kg", { precision: 18, scale: 2 }),
	volumeM3: decimal("volume_m3", { precision: 18, scale: 2 }),
	invoiceValue: decimal("invoice_value", { precision: 18, scale: 2 }),
	transportType: nvarchar("transport_type", { length: 20 }),
	serviceLevel: nvarchar("service_level", { length: 20 }),
	pickupDate: datetime2("pickup_date", { mode: 'string', precision: 7 }),
	deliveryDeadline: datetime2("delivery_deadline", { mode: 'string', precision: 7 }),
	customerTargetPrice: decimal("customer_target_price", { precision: 18, scale: 2 }),
	calculatedPrice: decimal("calculated_price", { precision: 18, scale: 2 }),
	quotedPrice: decimal("quoted_price", { precision: 18, scale: 2 }),
	discountPercent: decimal("discount_percent", { precision: 5, scale: 2 }),
	discountReason: nvarchar("discount_reason", { length: 200 }),
	priceBreakdown: nvarchar("price_breakdown", { length: 'max' }),
	status: nvarchar({ length: 20 }).default("NEW").notNull(),
	rejectionReason: nvarchar("rejection_reason", { length: 200 }),
	quotedBy: nvarchar("quoted_by", { length: 100 }),
	quotedAt: datetime2("quoted_at", { mode: 'string', precision: 7 }),
	approvedBy: nvarchar("approved_by", { length: 100 }),
	approvedAt: datetime2("approved_at", { mode: 'string', precision: 7 }),
	acceptedByCustomer: nvarchar("accepted_by_customer", { length: 100 }),
	acceptedAt: datetime2("accepted_at", { mode: 'string', precision: 7 }),
	pickupOrderId: int("pickup_order_id"),
	notes: nvarchar({ length: 1000 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83FA986FA0C"}),
	unique("UQ__freight___B194C126BDF08E8E").on(table.quoteNumber)
]);

export const freightTablePrices = mssqlTable("freight_table_prices", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	freightTableRouteId: int("freight_table_route_id").notNull().references(() => freightTableRoutes.id, { onDelete: "cascade" } ),
	minWeight: decimal("min_weight", { precision: 18, scale: 2 }),
	maxWeight: decimal("max_weight", { precision: 18, scale: 2 }),
	vehicleTypeId: int("vehicle_type_id").references(() => vehicleTypes.id),
	price: decimal({ precision: 18, scale: 2 }).notNull(),
	excessPrice: decimal("excess_price", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	displayOrder: int("display_order").default(0),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83F6D25E78E"}),
	index("idx_freight_table_prices_route").on(table.freightTableRouteId),
]);

export const freightTableRoutes = mssqlTable("freight_table_routes", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	freightTableId: int("freight_table_id").notNull().references(() => freightTables.id, { onDelete: "cascade" } ),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	originCityId: int("origin_city_id"),
	destinationCityId: int("destination_city_id"),
	notes: nvarchar({ length: 'max' }),
	displayOrder: int("display_order").default(0),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83F67FD46EE"}),
	index("idx_freight_table_routes_table").on(table.freightTableId),
]);

export const freightTables = mssqlTable("freight_tables", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 255 }).notNull(),
	code: nvarchar({ length: 50 }),
	type: nvarchar({ length: 30 }).notNull(),
	transportType: nvarchar("transport_type", { length: 30 }).notNull(),
	customerId: int("customer_id").references(() => businessPartners.id),
	validFrom: datetime2("valid_from", { mode: 'string', precision: 7 }).notNull(),
	validTo: datetime2("valid_to", { mode: 'string', precision: 7 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	description: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	calculationType: nvarchar("calculation_type", { length: 30 }).default("WEIGHT_RANGE"),
	minFreightValue: decimal("min_freight_value", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83F3044C82D"}),
	index("idx_freight_tables_customer").on(table.customerId),
	index("idx_freight_tables_org").on(table.organizationId),
	index("idx_freight_tables_type").on(table.type),
]);

export const freightWeightRanges = mssqlTable("freight_weight_ranges", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	freightTableId: int("freight_table_id").notNull().references(() => freightTables.id, { onDelete: "cascade" } ),
	minWeight: decimal("min_weight", { precision: 18, scale: 2 }).notNull(),
	maxWeight: decimal("max_weight", { precision: 18, scale: 2 }),
	fixedPrice: decimal("fixed_price", { precision: 18, scale: 2 }).notNull(),
	pricePerKgExceeded: decimal("price_per_kg_exceeded", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	displayOrder: int("display_order").default(0),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__freight___3213E83FC323EC83"}),
	index("idx_freight_weight_ranges_table").on(table.freightTableId),
]);

export const frotaAbastecimentos = mssqlTable("frota_abastecimentos", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	branchId: int("branch_id").notNull(),
	dataAbastecimento: datetime2("data_abastecimento", { mode: 'string', precision: 7 }).default(sql`getdate()`).notNull(),
	localAbastecimento: nvarchar("local_abastecimento", { length: 255 }),
	idAtivo: int("id_ativo").notNull().references(() => costCenters.id),
	idMotorista: int("id_motorista"),
	idPcgCombustivel: int("id_pcg_combustivel").notNull().references(() => managementChartOfAccounts.id),
	litros: decimal({ precision: 10, scale: 3 }).notNull(),
	hodometroAtual: int("hodometro_atual").notNull(),
	hodometroAnterior: int("hodometro_anterior"),
	valorLitro: decimal("valor_litro", { precision: 10, scale: 4 }).notNull(),
	valorTotal: decimal("valor_total", { precision: 15, scale: 2 }).notNull(),
	kmRodados: int("km_rodados"),
	mediaKmL: decimal("media_km_l", { precision: 5, scale: 2 }),
	tipoAbastecimento: nvarchar("tipo_abastecimento", { length: 20 }).default("INTERNO"),
	numeroCupomFiscal: nvarchar("numero_cupom_fiscal", { length: 50 }),
	validado: bit().default(false),
	observacoes: nvarchar({ length: 500 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__frota_ab__3213E83FC585D38F"}),
	index("idx_ativo_data").on(table.idAtivo, table.dataAbastecimento),
	index("idx_pcg").on(table.idPcgCombustivel),
	index("idx_performance").on(table.mediaKmL, table.dataAbastecimento),
]);

export const geoRegions = mssqlTable("geo_regions", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 20 }).notNull(),
	name: nvarchar({ length: 100 }).notNull(),
	description: nvarchar({ length: 'max' }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__geo_regi__3213E83F21BD149C"}),
	uniqueIndex("idx_geo_regions_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const inboundInvoiceItems = mssqlTable("inbound_invoice_items", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	invoiceId: int("invoice_id").notNull().references(() => inboundInvoices.id, { onDelete: "cascade" } ),
	productId: int("product_id").references(() => products.id),
	productCodeXml: nvarchar("product_code_xml", { length: 60 }),
	productNameXml: nvarchar("product_name_xml", { length: 500 }),
	eanXml: nvarchar("ean_xml", { length: 14 }),
	ncm: nvarchar({ length: 8 }),
	cfop: nvarchar({ length: 4 }),
	cst: nvarchar({ length: 3 }),
	quantity: decimal({ precision: 15, scale: 4 }).notNull(),
	unit: nvarchar({ length: 10 }),
	unitPrice: decimal("unit_price", { precision: 18, scale: 6 }),
	totalPrice: decimal("total_price", { precision: 18, scale: 2 }),
	itemNumber: int("item_number"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
}, (table) => [
	primaryKey({ columns: [table.id], name: "inbound_invoice_items_pkey"}),
]);

export const inboundInvoices = mssqlTable("inbound_invoices", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	branchId: int("branch_id").notNull().references(() => branches.id),
	partnerId: int("partner_id").references(() => businessPartners.id),
	accessKey: nvarchar("access_key", { length: 44 }).notNull(),
	series: nvarchar({ length: 10 }),
	number: nvarchar({ length: 20 }),
	model: nvarchar({ mode: 'json', length: 2 }).default(55),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	entryDate: datetime2("entry_date", { mode: 'string', precision: 7 }),
	totalProducts: decimal("total_products", { precision: 18, scale: 2 }),
	totalNfe: decimal("total_nfe", { precision: 18, scale: 2 }),
	xmlContent: nvarchar("xml_content", { length: 'max' }),
	xmlHash: nvarchar("xml_hash", { length: 64 }),
	status: nvarchar({ length: 20 }).default("DRAFT"),
	importedBy: nvarchar("imported_by", { length: 255 }),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	carrierCnpj: nvarchar("carrier_cnpj", { length: 14 }),
	carrierName: nvarchar("carrier_name", { length: 255 }),
	recipientCnpj: nvarchar("recipient_cnpj", { length: 14 }),
	recipientName: nvarchar("recipient_name", { length: 255 }),
	recipientCity: nvarchar("recipient_city", { length: 100 }),
	recipientUf: nvarchar("recipient_uf", { length: 2 }),
	nfeType: nvarchar("nfe_type", { length: 20 }).default("PURCHASE"),
}, (table) => [
	primaryKey({ columns: [table.id], name: "inbound_invoices_pkey"}),
	index("idx_inbound_invoices_recipient").on(table.recipientUf, table.recipientCity),
	uniqueIndex("inbound_invoices_access_key_idx").on(table.accessKey, table.organizationId),
]);

export const intercompanyAllocationDetails = mssqlTable("intercompany_allocation_details", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	allocationId: int("allocation_id").notNull(),
	targetBranchId: int("target_branch_id").notNull(),
	targetAccountId: int("target_account_id").notNull(),
	allocationPercentage: decimal("allocation_percentage", { precision: 5, scale: 2 }),
	allocatedAmount: decimal("allocated_amount", { precision: 15, scale: 2 }).notNull(),
	journalEntryId: int("journal_entry_id"),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__intercom__3213E83F3B8E26FD"}),
]);

export const intercompanyAllocations = mssqlTable("intercompany_allocations", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	allocationPeriod: varchar("allocation_period", { length: 7 }).notNull(),
	allocationDate: date("allocation_date", { mode: 'string' }).notNull(),
	sourceBranchId: int("source_branch_id").notNull(),
	sourceAccountId: int("source_account_id").notNull(),
	totalAmount: decimal("total_amount", { precision: 15, scale: 2 }).notNull(),
	allocationMethod: varchar("allocation_method", { length: 50 }).notNull(),
	status: varchar({ length: 20 }).default("DRAFT"),
	approvedBy: int("approved_by"),
	approvedAt: datetime("approved_at", { mode: 'string' }),
	posted: bit().default(false),
	postedAt: datetime("posted_at", { mode: 'string' }),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__intercom__3213E83FC42F9818"}),
]);

export const inventoryAdjustments = mssqlTable("inventory_adjustments", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	countId: int("count_id"),
	adjustmentNumber: nvarchar("adjustment_number", { length: 20 }).notNull(),
	adjustmentDate: datetime2("adjustment_date", { mode: 'string', precision: 7 }).notNull(),
	productId: int("product_id").notNull(),
	locationId: int("location_id"),
	quantityBefore: decimal("quantity_before", { precision: 18, scale: 4 }),
	quantityAdjusted: decimal("quantity_adjusted", { precision: 18, scale: 4 }),
	quantityAfter: decimal("quantity_after", { precision: 18, scale: 4 }),
	reason: nvarchar({ length: 20 }).notNull(),
	notes: nvarchar({ length: 500 }),
	approvedBy: nvarchar("approved_by", { length: 255 }),
	approvedAt: datetime2("approved_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__inventor__3213E83F63502C3E"}),
]);

export const inventoryCountItems = mssqlTable("inventory_count_items", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	countId: int("count_id").notNull(),
	locationId: int("location_id"),
	productId: int("product_id").notNull(),
	systemQuantity: decimal("system_quantity", { precision: 18, scale: 4 }),
	countedQuantity: decimal("counted_quantity", { precision: 18, scale: 4 }),
	difference: decimal({ precision: 18, scale: 4 }),
	lotNumber: nvarchar("lot_number", { length: 50 }),
	expiryDate: datetime2("expiry_date", { mode: 'string', precision: 7 }),
	countedBy: nvarchar("counted_by", { length: 255 }),
	countedAt: datetime2("counted_at", { mode: 'string', precision: 7 }),
	notes: nvarchar({ length: 500 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__inventor__3213E83F479B8E02"}),
]);

export const journalEntries = mssqlTable("journal_entries", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: bigint("organization_id", { mode: 'number' }).notNull(),
	branchId: bigint("branch_id", { mode: 'number' }).notNull(),
	entryNumber: varchar("entry_number", { length: 20 }).notNull(),
	entryDate: datetime("entry_date", { mode: 'string' }).notNull(),
	sourceType: varchar("source_type", { length: 30 }).notNull(),
	sourceId: bigint("source_id", { mode: 'number' }),
	description: varchar({ length: 500 }).notNull(),
	notes: nvarchar({ length: 'max' }),
	totalDebit: decimal("total_debit", { precision: 18, scale: 2 }).notNull(),
	totalCredit: decimal("total_credit", { precision: 18, scale: 2 }).notNull(),
	status: varchar({ length: 20 }).default("DRAFT").notNull(),
	bookType: varchar("book_type", { length: 20 }).default("GENERAL").notNull(),
	reversedByEntryId: bigint("reversed_by_entry_id", { mode: 'number' }),
	reversalOfEntryId: bigint("reversal_of_entry_id", { mode: 'number' }),
	postedAt: datetime("posted_at", { mode: 'string' }),
	postedBy: bigint("posted_by", { mode: 'number' }),
	reversedAt: datetime("reversed_at", { mode: 'string' }),
	reversedByUser: bigint("reversed_by_user", { mode: 'number' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate().notNull(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate().notNull(),
	deletedAt: datetime("deleted_at", { mode: 'string' }),
	createdBy: bigint("created_by", { mode: 'number' }).notNull(),
	updatedBy: bigint("updated_by", { mode: 'number' }).notNull(),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__journal___3213E83F47139604"}),
	index("idx_journal_entries_date").on(table.entryDate),
	index("idx_journal_entries_entry_number").on(table.entryNumber),
	uniqueIndex("idx_journal_entries_entry_number_unique").on(table.organizationId, table.entryNumber).where(sql`([deleted_at] IS NULL)`),
	index("idx_journal_entries_org_branch").on(table.organizationId, table.branchId),
	index("idx_journal_entries_source").on(table.sourceType, table.sourceId),
	index("idx_journal_entries_status").on(table.status),
]);

export const journalEntryLines = mssqlTable("journal_entry_lines", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	journalEntryId: bigint("journal_entry_id", { mode: 'number' }).notNull().references(() => journalEntries.id),
	organizationId: bigint("organization_id", { mode: 'number' }).notNull(),
	lineNumber: int("line_number").notNull(),
	chartAccountId: bigint("chart_account_id", { mode: 'number' }).notNull(),
	debitAmount: decimal("debit_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	creditAmount: decimal("credit_amount", { precision: 18, scale: 2, mode: 'number' }).default(0.00).notNull(),
	costCenterId: bigint("cost_center_id", { mode: 'number' }),
	categoryId: bigint("category_id", { mode: 'number' }),
	partnerId: bigint("partner_id", { mode: 'number' }),
	projectId: bigint("project_id", { mode: 'number' }),
	description: varchar({ length: 500 }),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate().notNull(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate().notNull(),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__journal___3213E83F7FD14B14"}),
	index("idx_journal_entry_lines_account").on(table.chartAccountId),
	index("idx_journal_entry_lines_cost_center").on(table.costCenterId),
	index("idx_journal_entry_lines_entry").on(table.journalEntryId),
]);

export const lancamentosContabeis = mssqlTable("lancamentos_contabeis", {
	id: bigint({ mode: 'number' }).identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	branchId: int("branch_id").notNull(),
	dataLancamento: datetime2("data_lancamento", { mode: 'string', precision: 7 }).default(sql`getdate()`).notNull(),
	dataCompetencia: date("data_competencia", { mode: 'string' }).notNull(),
	idPlanoContas: int("id_plano_contas").notNull().references(() => chartOfAccounts.id),
	idPlanoContasGerencial: int("id_plano_contas_gerencial").references(() => managementChartOfAccounts.id),
	idCentroCusto: int("id_centro_custo").notNull().references(() => costCenters.id),
	historico: nvarchar({ length: 500 }).notNull(),
	valor: decimal({ precision: 15, scale: 2 }).notNull(),
	tipoLancamento: nvarchar("tipo_lancamento", { length: 1 }).notNull(),
	origemModulo: nvarchar("origem_modulo", { length: 20 }),
	idOrigemExterna: bigint("id_origem_externa", { mode: 'number' }),
	loteContabil: nvarchar("lote_contabil", { length: 50 }),
	status: nvarchar({ length: 20 }).default("PENDENTE"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__lancamen__3213E83F2F314A34"}),
	index("idx_dre").on(table.organizationId, table.dataCompetencia, table.idCentroCusto, table.idPlanoContasGerencial),
	index("idx_origem").on(table.origemModulo, table.idOrigemExterna),
	index("idx_status").on(table.status, table.dataCompetencia),
]);

export const maintenanceAlerts = mssqlTable("maintenance_alerts", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	vehicleId: int("vehicle_id").notNull(),
	maintenancePlanId: int("maintenance_plan_id").notNull(),
	alertType: nvarchar("alert_type", { length: 20 }).notNull(),
	alertMessage: nvarchar("alert_message", { length: 500 }).notNull(),
	currentOdometer: int("current_odometer"),
	nextServiceOdometer: int("next_service_odometer"),
	currentCheckDate: datetime2("current_check_date", { mode: 'string', precision: 7 }),
	nextServiceDate: datetime2("next_service_date", { mode: 'string', precision: 7 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	dismissedAt: datetime2("dismissed_at", { mode: 'string', precision: 7 }),
	dismissedBy: nvarchar("dismissed_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__maintena__3213E83FE2F53BF8"}),
]);

export const maintenanceProviders = mssqlTable("maintenance_providers", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	cnpj: nvarchar({ length: 18 }),
	contactName: nvarchar("contact_name", { length: 255 }),
	phone: nvarchar({ length: 20 }),
	specialty: nvarchar({ length: 100 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__maintena__3213E83F6687DD7B"}),
]);

export const maintenanceWorkOrders = mssqlTable("maintenance_work_orders", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	woNumber: nvarchar("wo_number", { length: 20 }).notNull(),
	vehicleId: int("vehicle_id").notNull(),
	woType: nvarchar("wo_type", { length: 20 }).notNull(),
	priority: nvarchar({ length: 20 }).default("NORMAL"),
	reportedByDriverId: int("reported_by_driver_id"),
	reportedIssue: nvarchar("reported_issue", { length: 500 }),
	odometer: int(),
	status: nvarchar({ length: 20 }).default("OPEN"),
	providerType: nvarchar("provider_type", { length: 20 }),
	providerId: int("provider_id"),
	openedAt: datetime2("opened_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	startedAt: datetime2("started_at", { mode: 'string', precision: 7 }),
	completedAt: datetime2("completed_at", { mode: 'string', precision: 7 }),
	totalLaborCost: decimal("total_labor_cost", { precision: 18, scale: 2 }),
	totalPartsCost: decimal("total_parts_cost", { precision: 18, scale: 2 }),
	totalCost: decimal("total_cost", { precision: 18, scale: 2 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__maintena__3213E83FE5E3B360"}),
]);

export const managementChartOfAccounts = mssqlTable("management_chart_of_accounts", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	code: nvarchar({ length: 20 }).notNull(),
	name: nvarchar({ length: 200 }).notNull(),
	type: nvarchar({ length: 20 }).notNull(),
	allocationRule: nvarchar("allocation_rule", { length: 50 }),
	isActive: bit("is_active").default(true),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	deletedBy: nvarchar("deleted_by", { length: 255 }),
	legalAccountId: int("legal_account_id"),
	description: nvarchar({ length: 'max' }),
	category: nvarchar({ length: 50 }),
	parentId: int("parent_id"),
	level: int().default(0),
	isAnalytical: bit("is_analytical").default(true),
	allocationBase: nvarchar("allocation_base", { length: 50 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	idCategoriaFinanceiraPadrao: int("id_categoria_financeira_padrao").references(() => financialCategories.id),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__manageme__3213E83FC575919E"}),
	unique("UQ_mgmt_chart_code").on(table.organizationId, table.code)
]);

export const managementJournalEntries = mssqlTable("management_journal_entries", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	entryDate: date("entry_date", { mode: 'string' }).notNull(),
	description: nvarchar({ length: 500 }),
	referenceType: nvarchar("reference_type", { length: 50 }),
	referenceId: int("reference_id"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__manageme__3213E83F077D9163"}),
]);

export const managementJournalEntryLines = mssqlTable("management_journal_entry_lines", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	entryId: int("entry_id").notNull(),
	managementAccountId: int("management_account_id").notNull(),
	debitAmount: decimal("debit_amount", { precision: 18, scale: 2, mode: 'number' }).default(0),
	creditAmount: decimal("credit_amount", { precision: 18, scale: 2, mode: 'number' }).default(0),
	costCenterId: int("cost_center_id"),
	description: nvarchar({ length: 500 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__manageme__3213E83F575C7641"}),
]);

export const mdfeDocuments = mssqlTable("mdfe_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	mdfeHeaderId: int("mdfe_header_id").notNull(),
	cteHeaderId: int("cte_header_id").notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__mdfe_doc__3213E83FDD3E22A2"}),
]);

export const mdfeHeader = mssqlTable("mdfe_header", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	mdfeNumber: int("mdfe_number").notNull(),
	serie: nvarchar({ mode: 'json', length: 3 }).default(1),
	mdfeKey: nvarchar("mdfe_key", { length: 44 }),
	tripId: int("trip_id"),
	vehicleId: int("vehicle_id").notNull(),
	driverId: int("driver_id").notNull(),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	route: nvarchar({ length: 'max' }),
	ciotNumber: nvarchar("ciot_number", { length: 50 }),
	status: nvarchar({ length: 20 }).default("DRAFT"),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }).notNull(),
	closeDate: datetime2("close_date", { mode: 'string', precision: 7 }),
	protocolNumber: nvarchar("protocol_number", { length: 20 }),
	authorizationDate: datetime2("authorization_date", { mode: 'string', precision: 7 }),
	xmlSigned: nvarchar("xml_signed", { length: 'max' }),
	xmlAuthorized: nvarchar("xml_authorized", { length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__mdfe_hea__3213E83FE1BCC95C"}),
]);

export const mechanics = mssqlTable("mechanics", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	specialty: nvarchar({ length: 100 }),
	hourlyRate: decimal("hourly_rate", { precision: 18, scale: 2 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__mechanic__3213E83F72B47F08"}),
]);

export const ncmFinancialCategories = mssqlTable("ncm_financial_categories", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id"),
	ncmCode: nvarchar("ncm_code", { length: 8 }).notNull(),
	financialCategoryId: int("financial_category_id"),
	chartAccountId: int("chart_account_id"),
	description: nvarchar({ length: 255 }),
	isActive: bit("is_active").default(true),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__ncm_fina__3213E83F07EAB678"}),
	index("idx_ncm_active").on(table.isActive, table.deletedAt),
	index("idx_ncm_org").on(table.organizationId, table.ncmCode),
]);

export const nfeManifestationEvents = mssqlTable("nfe_manifestation_events", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	inboundInvoiceId: int("inbound_invoice_id").notNull(),
	eventType: nvarchar("event_type", { length: 10 }).notNull(),
	eventDescription: nvarchar("event_description", { length: 100 }),
	justification: nvarchar({ length: 500 }),
	protocolNumber: nvarchar("protocol_number", { length: 20 }),
	status: nvarchar({ length: 20 }).default("PENDING"),
	sefazReturnCode: nvarchar("sefaz_return_code", { length: 10 }),
	sefazReturnMessage: nvarchar("sefaz_return_message", { length: 500 }),
	sentAt: datetime2("sent_at", { mode: 'string', precision: 7 }),
	confirmedAt: datetime2("confirmed_at", { mode: 'string', precision: 7 }),
	xmlEvent: nvarchar("xml_event", { length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__nfe_mani__3213E83FF54E306F"}),
]);

export const notifications = mssqlTable("notifications", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	userId: nvarchar("user_id", { length: 255 }).notNull(),
	type: nvarchar({ length: 50 }).notNull(),
	title: nvarchar({ length: 255 }).notNull(),
	message: nvarchar({ length: 'max' }).notNull(),
	link: nvarchar({ length: 500 }),
	isRead: int("is_read").notNull().default(0),
	priority: nvarchar({ length: 20 }).default(sql`'NORMAL'`),
	metadata: nvarchar({ length: 'max' }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	readAt: datetime2("read_at", { mode: 'string', precision: 7 }),
	branchId: int("branch_id"),
	event: nvarchar({ length: 100 }),
	data: nvarchar({ length: 'max' }),
	actionUrl: nvarchar("action_url", { length: 500 }),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).notNull().default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__notifica__3213E83FFC2149E0"}),
	index("idx_notifications_org").on(table.organizationId, table.createdAt),
	index("idx_notifications_type").on(table.type, table.createdAt),
	index("idx_notifications_user").on(table.userId, table.isRead, table.createdAt),
	check("CK__notificati__type__04EFA97D", sql`([type]='INFO' OR [type]='WARNING' OR [type]='ERROR' OR [type]='SUCCESS')`),
]);

export const opsHealthRuns = mssqlTable("ops_health_runs", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	runId: nvarchar("run_id", { length: 64 }).notNull(),
	status: nvarchar({ length: 16 }).notNull(),
	startedAt: datetime2("started_at", { mode: 'string', precision: 7 }).default(sql`sysutcdatetime()`).notNull(),
	finishedAt: datetime2("finished_at", { mode: 'string', precision: 7 }),
	durationMs: int("duration_ms"),
	summaryJson: nvarchar("summary_json", { length: 'max' }),
	detailsJson: nvarchar("details_json", { length: 'max' }),
	errorMessage: nvarchar("error_message", { length: 'max' }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__ops_heal__3213E83F5FBD64F6"}),
	index("IX_ops_health_runs_started_at").on(table.startedAt),
	uniqueIndex("UX_ops_health_runs_run_id").on(table.runId),
]);

export const organizations = mssqlTable("organizations", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	name: nvarchar({ length: 255 }).notNull(),
	slug: nvarchar({ length: 100 }).notNull(),
	document: nvarchar({ length: 20 }).notNull(),
	plan: nvarchar({ length: 20 }).default("FREE"),
	stripeCustomerId: nvarchar("stripe_customer_id", { length: 100 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.774'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.774'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "organizations_pkey"}),
	uniqueIndex("organizations_document_idx").on(table.document),
	uniqueIndex("organizations_slug_idx").on(table.slug),
]);

export const payableItems = mssqlTable("payable_items", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	payableId: int("payable_id").notNull().references(() => accountsPayable.id, { onDelete: "cascade" } ),
	itemNumber: int("item_number").notNull(),
	ncm: nvarchar({ length: 10 }).notNull(),
	productCode: nvarchar("product_code", { length: 100 }),
	productName: nvarchar("product_name", { length: 255 }).notNull(),
	ean: nvarchar({ length: 20 }),
	cfop: nvarchar({ length: 10 }),
	cst: nvarchar({ length: 10 }),
	unit: nvarchar({ length: 10 }).notNull(),
	quantity: decimal({ precision: 18, scale: 4 }).notNull(),
	unitPrice: decimal("unit_price", { precision: 18, scale: 4 }).notNull(),
	totalPrice: decimal("total_price", { precision: 18, scale: 2 }).notNull(),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__payable___3213E83F49A89C0B"}),
	index("IX_payable_items_ncm").on(table.ncm),
	index("IX_payable_items_payable_id").on(table.payableId),
]);

export const paymentTerms = mssqlTable("payment_terms", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 20 }).notNull(),
	name: nvarchar({ length: 100 }).notNull(),
	description: nvarchar({ length: 'max' }),
	installments: int().default(1).notNull(),
	daysInterval: int("days_interval").default(0),
	firstDueDays: int("first_due_days").default(0),
	type: nvarchar({ length: 20 }).default("TERM"),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__payment___3213E83F58CD6BBB"}),
	uniqueIndex("idx_payment_terms_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const pcgNcmRules = mssqlTable("pcg_ncm_rules", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id),
	pcgId: int("pcg_id").notNull().references(() => managementChartOfAccounts.id),
	ncmCode: nvarchar("ncm_code", { length: 10 }).notNull(),
	ncmDescription: nvarchar("ncm_description", { length: 255 }),
	flagPisCofinsMonofasico: bit("flag_pis_cofins_monofasico").default(false),
	flagIcmsSt: bit("flag_icms_st").default(false),
	flagIcmsDiferimento: bit("flag_icms_diferimento").default(false),
	flagIpiSuspenso: bit("flag_ipi_suspenso").default(false),
	flagImportacao: bit("flag_importacao").default(false),
	priority: int().default(100),
	isActive: bit("is_active").default(true),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__pcg_ncm___3213E83FBFD8BA3A"}),
	index("idx_ncm_lookup").on(table.ncmCode, table.isActive),
	index("idx_org_active").on(table.organizationId, table.isActive, table.deletedAt),
	index("idx_pcg_ncm").on(table.pcgId, table.ncmCode),
	uniqueIndex("uk_pcg_ncm_org").on(table.organizationId, table.pcgId, table.ncmCode).where(sql`([deleted_at] IS NULL)`),
]);

export const permissions = mssqlTable("permissions", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	slug: nvarchar({ length: 100 }).notNull(),
	description: nvarchar({ length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
}, (table) => [
	primaryKey({ columns: [table.id], name: "permissions_pkey"}),
	uniqueIndex("permissions_slug_idx").on(table.slug),
]);

export const pickupOrders = mssqlTable("pickup_orders", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	orderNumber: nvarchar("order_number", { length: 20 }).notNull(),
	quoteId: int("quote_id"),
	customerId: int("customer_id").notNull(),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	originCityId: int("origin_city_id"),
	originAddress: nvarchar("origin_address", { length: 500 }),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	destinationCityId: int("destination_city_id"),
	destinationAddress: nvarchar("destination_address", { length: 500 }),
	cargoDescription: nvarchar("cargo_description", { length: 500 }),
	weightKg: decimal("weight_kg", { precision: 18, scale: 2 }),
	volumeM3: decimal("volume_m3", { precision: 18, scale: 2 }),
	invoiceValue: decimal("invoice_value", { precision: 18, scale: 2 }),
	agreedPrice: decimal("agreed_price", { precision: 18, scale: 2 }),
	vehicleId: int("vehicle_id"),
	driverId: int("driver_id"),
	allocatedAt: datetime2("allocated_at", { mode: 'string', precision: 7 }),
	allocatedBy: nvarchar("allocated_by", { length: 100 }),
	scheduledPickupDate: datetime2("scheduled_pickup_date", { mode: 'string', precision: 7 }),
	actualPickupDatetime: datetime2("actual_pickup_datetime", { mode: 'string', precision: 7 }),
	insurancePolicy: nvarchar("insurance_policy", { length: 50 }),
	insuranceCertificate: nvarchar("insurance_certificate", { length: 50 }),
	insuranceCompany: nvarchar("insurance_company", { length: 200 }),
	status: nvarchar({ length: 20 }).default("PENDING_ALLOCATION").notNull(),
	cteId: int("cte_id"),
	tripId: int("trip_id"),
	notes: nvarchar({ length: 1000 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__pickup_o__3213E83F9C07F6A6"}),
	unique("UQ__pickup_o__730E34DFE68A616D").on(table.orderNumber)
]);

export const productUnitConversions = mssqlTable("product_unit_conversions", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	productId: int("product_id").notNull(),
	fromUnit: nvarchar("from_unit", { length: 10 }).notNull(),
	toUnit: nvarchar("to_unit", { length: 10 }).notNull(),
	factor: decimal({ precision: 10, scale: 4 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__product___3213E83F8BE8EE10"}),
]);

export const products = mssqlTable("products", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	sku: nvarchar({ length: 50 }).notNull(),
	name: nvarchar({ length: 255 }).notNull(),
	description: nvarchar({ length: 'max' }),
	unit: nvarchar({ length: 10 }).notNull(),
	createdBy: nvarchar("created_by", { length: 255 }),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	ncm: nvarchar({ length: 8 }).default("00000000").notNull(),
	origin: nvarchar({ mode: 'json', length: 1 }).default(0).notNull(),
	weightKg: decimal("weight_kg", { precision: 10, scale: 3 }),
	priceCost: decimal("price_cost", { precision: 18, scale: 2 }),
	priceSale: decimal("price_sale", { precision: 18, scale: 2 }),
	unitConversionEnabled: nvarchar("unit_conversion_enabled", { length: 1 }).default("N"),
	unitConversionFactor: decimal("unit_conversion_factor", { precision: 10, scale: 4 }),
	primaryUnit: nvarchar("primary_unit", { length: 10 }),
	secondaryUnit: nvarchar("secondary_unit", { length: 10 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "products_pkey"}),
	uniqueIndex("products_sku_org_idx").on(table.sku, table.organizationId),
]);

export const rolePermissions = mssqlTable("role_permissions", {
	roleId: int("role_id").notNull(),
	permissionId: int("permission_id").notNull(),
}, (table) => [
	primaryKey({ columns: [table.roleId, table.permissionId], name: "role_permissions_pkey"}),
]);

export const roles = mssqlTable("roles", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	name: nvarchar({ length: 50 }).notNull(),
	description: nvarchar({ length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
}, (table) => [
	primaryKey({ columns: [table.id], name: "roles_pkey"}),
]);

export const sessions = mssqlTable("sessions", {
	sessionToken: nvarchar({ length: 255 }),
	userId: nvarchar({ length: 255 }).notNull().references(() => users.id, { onDelete: "cascade" } ),
	expires: datetime2({ mode: 'string', precision: 3 }).notNull(),
}, (table) => [
	primaryKey({ columns: [table.sessionToken], name: "sessions_pkey"}),
]);

export const taxCredits = mssqlTable("tax_credits", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	invoiceId: int("invoice_id").notNull(),
	taxType: nvarchar("tax_type", { length: 20 }).notNull(),
	taxBase: decimal("tax_base", { precision: 18, scale: 2 }).notNull(),
	taxRate: decimal("tax_rate", { precision: 5, scale: 2 }).notNull(),
	taxValue: decimal("tax_value", { precision: 18, scale: 2 }).notNull(),
	isRecoverable: nvarchar("is_recoverable", { length: 1 }).default("S"),
	recoverabilityReason: nvarchar("recoverability_reason", { length: 500 }),
	recoveredAt: datetime2("recovered_at", { mode: 'string', precision: 7 }),
	recoveredInPeriod: nvarchar("recovered_in_period", { length: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__tax_cred__3213E83F8184B4C2"}),
]);

export const taxMatrix = mssqlTable("tax_matrix", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	originUf: nvarchar("origin_uf", { length: 2 }).notNull(),
	destinationUf: nvarchar("destination_uf", { length: 2 }).notNull(),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2 }).notNull(),
	icmsStRate: decimal("icms_st_rate", { precision: 5, scale: 2 }),
	icmsReduction: decimal("icms_reduction", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	fcpRate: decimal("fcp_rate", { precision: 5, scale: 2, mode: 'number' }).default(0.00),
	cfopInternal: nvarchar("cfop_internal", { length: 4 }),
	cfopInterstate: nvarchar("cfop_interstate", { length: 4 }),
	cst: nvarchar({ length: 2 }).default("00"),
	regime: nvarchar({ length: 30 }).default("NORMAL"),
	validFrom: datetime2("valid_from", { mode: 'string', precision: 7 }).notNull(),
	validTo: datetime2("valid_to", { mode: 'string', precision: 7 }),
	notes: nvarchar({ length: 500 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__tax_matr__3213E83F9F3D9DF5"}),
	uniqueIndex("idx_tax_matrix_route_regime_org").on(table.originUf, table.destinationUf, table.regime, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const taxRules = mssqlTable("tax_rules", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	originState: nvarchar("origin_state", { length: 2 }).notNull(),
	destinationState: nvarchar("destination_state", { length: 2 }).notNull(),
	icmsRate: decimal("icms_rate", { precision: 5, scale: 2 }).notNull(),
	cfopTransport: nvarchar("cfop_transport", { length: 4 }),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__tax_rule__3213E83FC398CEE5"}),
	uniqueIndex("idx_tax_rules_route_org").on(table.originState, table.destinationState, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const tripDocuments = mssqlTable("trip_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	tripId: int("trip_id").notNull(),
	tripStopId: int("trip_stop_id"),
	documentType: nvarchar("document_type", { length: 10 }).default("CTE"),
	cteId: int("cte_id"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__trip_doc__3213E83FC12C154F"}),
]);

export const tripOccurrences = mssqlTable("trip_occurrences", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	tripId: int("trip_id").notNull(),
	occurrenceType: nvarchar("occurrence_type", { length: 50 }).notNull(),
	severity: nvarchar({ length: 20 }).notNull(),
	title: nvarchar({ length: 255 }).notNull(),
	description: nvarchar({ length: 'max' }).notNull(),
	latitude: decimal({ precision: 10, scale: 7 }),
	longitude: decimal({ precision: 10, scale: 7 }),
	address: nvarchar({ length: 500 }),
	photosUrls: nvarchar("photos_urls", { length: 'max' }),
	documentsUrls: nvarchar("documents_urls", { length: 'max' }),
	responsibleParty: nvarchar("responsible_party", { length: 50 }),
	actionsTaken: nvarchar("actions_taken", { length: 'max' }),
	estimatedLoss: decimal("estimated_loss", { precision: 18, scale: 2 }),
	insuranceClaim: nvarchar("insurance_claim", { length: 1 }).default("N"),
	insuranceClaimNumber: nvarchar("insurance_claim_number", { length: 100 }),
	status: nvarchar({ length: 20 }).default("OPEN"),
	resolvedAt: datetime2("resolved_at", { mode: 'string', precision: 7 }),
	resolutionNotes: nvarchar("resolution_notes", { length: 'max' }),
	clientNotified: nvarchar("client_notified", { length: 1 }).default("N"),
	clientNotifiedAt: datetime2("client_notified_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__trip_occ__3213E83F7E97874C"}),
]);

export const tripStops = mssqlTable("trip_stops", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	tripId: int("trip_id").notNull(),
	stopType: nvarchar("stop_type", { length: 20 }).notNull(),
	sequence: int().notNull(),
	businessPartnerId: int("business_partner_id"),
	address: nvarchar({ length: 500 }),
	cityId: int("city_id"),
	uf: nvarchar({ length: 2 }),
	latitude: decimal({ precision: 10, scale: 8 }),
	longitude: decimal({ precision: 11, scale: 8 }),
	scheduledDatetime: datetime2("scheduled_datetime", { mode: 'string', precision: 7 }),
	actualArrival: datetime2("actual_arrival", { mode: 'string', precision: 7 }),
	actualDeparture: datetime2("actual_departure", { mode: 'string', precision: 7 }),
	status: nvarchar({ length: 20 }).default("PENDING"),
	proofPhotoUrl: nvarchar("proof_photo_url", { length: 500 }),
	signatureUrl: nvarchar("signature_url", { length: 500 }),
	notes: nvarchar({ length: 500 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__trip_sto__3213E83F48A45ED3"}),
]);

export const trips = mssqlTable("trips", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	tripNumber: nvarchar("trip_number", { length: 20 }).notNull(),
	pickupOrderIds: nvarchar("pickup_order_ids", { length: 'max' }),
	vehicleId: int("vehicle_id").notNull(),
	driverId: int("driver_id").notNull(),
	driverType: nvarchar("driver_type", { length: 20 }),
	trailer1Id: int("trailer_1_id"),
	trailer2Id: int("trailer_2_id"),
	scheduledStart: datetime2("scheduled_start", { mode: 'string', precision: 7 }),
	actualStart: datetime2("actual_start", { mode: 'string', precision: 7 }),
	scheduledEnd: datetime2("scheduled_end", { mode: 'string', precision: 7 }),
	actualEnd: datetime2("actual_end", { mode: 'string', precision: 7 }),
	mdfeId: int("mdfe_id"),
	mdfeStatus: nvarchar("mdfe_status", { length: 20 }),
	requiresCiot: nvarchar("requires_ciot", { mode: 'json', length: 10 }).default(false),
	ciotNumber: nvarchar("ciot_number", { length: 50 }),
	ciotValue: decimal("ciot_value", { precision: 18, scale: 2 }),
	ciotIssuedAt: datetime2("ciot_issued_at", { mode: 'string', precision: 7 }),
	status: nvarchar({ length: 20 }).default("DRAFT").notNull(),
	estimatedRevenue: decimal("estimated_revenue", { precision: 18, scale: 2 }),
	actualRevenue: decimal("actual_revenue", { precision: 18, scale: 2 }),
	estimatedCost: decimal("estimated_cost", { precision: 18, scale: 2 }),
	actualCost: decimal("actual_cost", { precision: 18, scale: 2 }),
	notes: nvarchar({ length: 1000 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__trips__3213E83FC915F174"}),
	unique("UQ__trips__6F5F54C9A8F0080A").on(table.tripNumber)
]);

export const unitsOfMeasure = mssqlTable("units_of_measure", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 10 }).notNull(),
	name: nvarchar({ length: 100 }).notNull(),
	symbol: nvarchar({ length: 10 }),
	type: nvarchar({ length: 20 }).notNull(),
	conversionFactor: decimal("conversion_factor", { precision: 18, scale: 6, mode: 'number' }).default(1.000000),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__units_of__3213E83FA70FC192"}),
	uniqueIndex("idx_units_of_measure_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const userBranches = mssqlTable("user_branches", {
	userId: nvarchar("user_id", { length: 255 }).notNull(),
	branchId: int("branch_id").notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default('2025-12-05 22:32:25.775'),
}, (table) => [
	primaryKey({ columns: [table.userId, table.branchId], name: "user_branches_pkey"}),
]);

export const userRoles = mssqlTable("user_roles", {
	userId: nvarchar("user_id", { length: 255 }).notNull(),
	roleId: int("role_id").notNull().references(() => roles.id, { onDelete: "cascade" } ),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.userId, table.roleId], name: "PK__user_rol__6EDEA15386E71580"}),
]);

export const users = mssqlTable("users", {
	id: nvarchar({ length: 255 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	name: nvarchar({ length: 255 }),
	email: nvarchar({ length: 255 }).notNull(),
	emailVerified: datetime2({ mode: 'string', precision: 3 }),
	image: nvarchar({ length: 'max' }),
	passwordHash: nvarchar("password_hash", { length: 'max' }),
	role: nvarchar({ length: 50 }).default("USER"),
	defaultBranchId: int("default_branch_id"),
	createdAt: datetime2("created_at", { mode: 'string', precision: 3 }).default('2025-12-05 22:32:25.775'),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 3 }).default('2025-12-05 22:32:25.775'),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 3 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "users_pkey"}),
	uniqueIndex("users_email_org_idx").on(table.email, table.organizationId),
]);

export const vehicleDocuments = mssqlTable("vehicle_documents", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	branchId: int("branch_id").notNull(),
	vehicleId: int("vehicle_id").notNull(),
	documentType: nvarchar("document_type", { length: 50 }).notNull(),
	documentNumber: nvarchar("document_number", { length: 100 }),
	issueDate: datetime2("issue_date", { mode: 'string', precision: 7 }),
	expiryDate: datetime2("expiry_date", { mode: 'string', precision: 7 }).notNull(),
	insuranceCompany: nvarchar("insurance_company", { length: 255 }),
	policyNumber: nvarchar("policy_number", { length: 100 }),
	insuredValue: decimal("insured_value", { precision: 18, scale: 2 }),
	fileUrl: nvarchar("file_url", { length: 500 }),
	status: nvarchar({ length: 20 }).default("VALID"),
	alertSentAt: datetime2("alert_sent_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__vehicle___3213E83FED11EF1B"}),
]);

export const vehicleMaintenancePlans = mssqlTable("vehicle_maintenance_plans", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	vehicleModel: nvarchar("vehicle_model", { length: 100 }),
	serviceName: nvarchar("service_name", { length: 255 }).notNull(),
	serviceDescription: nvarchar("service_description", { length: 500 }),
	triggerType: nvarchar("trigger_type", { length: 20 }).notNull(),
	mileageInterval: int("mileage_interval"),
	timeIntervalMonths: int("time_interval_months"),
	advanceWarningKm: int("advance_warning_km"),
	advanceWarningDays: int("advance_warning_days"),
	isActive: nvarchar("is_active", { length: 1 }).default("S"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__vehicle___3213E83F31558CA8"}),
]);

export const vehicleTypes = mssqlTable("vehicle_types", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	code: nvarchar({ length: 20 }).notNull(),
	name: nvarchar({ length: 100 }).notNull(),
	description: nvarchar({ length: 'max' }),
	category: nvarchar({ length: 30 }).notNull(),
	capacityKg: decimal("capacity_kg", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	capacityM3: decimal("capacity_m3", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	axles: int().default(0),
	maxLength: decimal("max_length", { precision: 18, scale: 2 }),
	maxHeight: decimal("max_height", { precision: 18, scale: 2 }),
	maxWidth: decimal("max_width", { precision: 18, scale: 2 }),
	status: nvarchar({ length: 20 }).default("ACTIVE"),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__vehicle___3213E83FD1238435"}),
	uniqueIndex("idx_vehicle_types_code_org").on(table.code, table.organizationId).where(sql`([deleted_at] IS NULL)`),
]);

export const vehicles = mssqlTable("vehicles", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull().references(() => organizations.id, { onDelete: "cascade" } ),
	branchId: int("branch_id").notNull().references(() => branches.id),
	plate: nvarchar({ length: 10 }).notNull(),
	renavam: nvarchar({ length: 20 }),
	chassis: nvarchar({ length: 30 }),
	type: nvarchar({ length: 20 }).notNull(),
	brand: nvarchar({ length: 100 }),
	model: nvarchar({ length: 100 }),
	year: int(),
	color: nvarchar({ length: 50 }),
	capacityKg: decimal("capacity_kg", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	capacityM3: decimal("capacity_m3", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	taraKg: decimal("tara_kg", { precision: 18, scale: 2, mode: 'number' }).default(0.00),
	status: nvarchar({ length: 20 }).default("AVAILABLE"),
	currentKm: int("current_km").default(0),
	maintenanceStatus: nvarchar("maintenance_status", { length: 20 }).default("OK"),
	lastMaintenanceDate: datetime2("last_maintenance_date", { mode: 'string', precision: 7 }),
	nextMaintenanceKm: int("next_maintenance_km"),
	licensePlateExpiry: datetime2("license_plate_expiry", { mode: 'string', precision: 7 }),
	insuranceExpiry: datetime2("insurance_expiry", { mode: 'string', precision: 7 }),
	notes: nvarchar({ length: 'max' }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	updatedBy: nvarchar("updated_by", { length: 255 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	deletedAt: datetime2("deleted_at", { mode: 'string', precision: 7 }),
	version: int().default(1).notNull(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__vehicles__3213E83F4A2416D6"}),
	index("idx_vehicles_org_branch").on(table.organizationId, table.branchId),
	uniqueIndex("idx_vehicles_plate_org").on(table.plate, table.organizationId).where(sql`([deleted_at] IS NULL)`),
	index("idx_vehicles_status").on(table.status),
	index("idx_vehicles_type").on(table.type),
]);

export const verificationToken = mssqlTable("verificationToken", {
	identifier: nvarchar({ length: 255 }).notNull(),
	token: nvarchar({ length: 255 }).notNull(),
	expires: datetime2({ mode: 'string', precision: 3 }).notNull(),
}, (table) => [
	primaryKey({ columns: [table.identifier, table.token], name: "verificationToken_pkey"}),
]);

export const warehouseInventoryCounts = mssqlTable("warehouse_inventory_counts", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	warehouseId: int("warehouse_id").notNull(),
	countNumber: nvarchar("count_number", { length: 20 }).notNull(),
	countDate: datetime2("count_date", { mode: 'string', precision: 7 }).notNull(),
	countType: nvarchar("count_type", { length: 20 }).notNull(),
	status: nvarchar({ length: 20 }).default("IN_PROGRESS"),
	notes: nvarchar({ length: 500 }),
	startedBy: nvarchar("started_by", { length: 255 }).notNull(),
	startedAt: datetime2("started_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	completedAt: datetime2("completed_at", { mode: 'string', precision: 7 }),
	createdBy: nvarchar("created_by", { length: 255 }).notNull(),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	updatedAt: datetime2("updated_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__warehous__3213E83F91F1BA21"}),
]);

export const wmsBillingEvents = mssqlTable("wms_billing_events", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	customerId: int("customer_id").notNull(),
	contractId: int("contract_id"),
	eventType: varchar("event_type", { length: 50 }).notNull(),
	eventDate: date("event_date", { mode: 'string' }).notNull(),
	eventTimestamp: datetime("event_timestamp", { mode: 'string' }).defaultGetDate(),
	quantity: decimal({ precision: 10, scale: 2 }).notNull(),
	unitOfMeasure: varchar("unit_of_measure", { length: 20 }).notNull(),
	unitPrice: decimal("unit_price", { precision: 10, scale: 4 }).notNull(),
	subtotal: decimal({ precision: 15, scale: 2 }).notNull(),
	revenueAccountId: int("revenue_account_id"),
	relatedDocumentType: varchar("related_document_type", { length: 50 }),
	relatedDocumentId: int("related_document_id"),
	relatedDocumentNumber: varchar("related_document_number", { length: 100 }),
	billingStatus: varchar("billing_status", { length: 20 }).default("PENDING"),
	billingPeriod: varchar("billing_period", { length: 7 }),
	preInvoiceId: int("pre_invoice_id"),
	invoiceId: int("invoice_id"),
	notes: nvarchar({ length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__wms_bill__3213E83F0591C095"}),
	index("idx_wms_billing_customer").on(table.customerId, table.eventDate),
]);

export const wmsPreInvoices = mssqlTable("wms_pre_invoices", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	organizationId: int("organization_id").notNull(),
	customerId: int("customer_id").notNull(),
	billingPeriod: varchar("billing_period", { length: 7 }).notNull(),
	measurementDate: date("measurement_date", { mode: 'string' }).notNull(),
	totalStorage: decimal("total_storage", { precision: 15, scale: 2, mode: 'number' }).default(0),
	totalInbound: decimal("total_inbound", { precision: 15, scale: 2, mode: 'number' }).default(0),
	totalOutbound: decimal("total_outbound", { precision: 15, scale: 2, mode: 'number' }).default(0),
	totalExtras: decimal("total_extras", { precision: 15, scale: 2, mode: 'number' }).default(0),
	subtotal: decimal({ precision: 15, scale: 2 }).notNull(),
	issRate: decimal("iss_rate", { precision: 5, scale: 2, mode: 'number' }).default(0),
	issAmount: decimal("iss_amount", { precision: 15, scale: 2, mode: 'number' }).default(0),
	netAmount: decimal("net_amount", { precision: 15, scale: 2 }).notNull(),
	status: varchar({ length: 20 }).default("DRAFT"),
	sentToCustomerAt: datetime("sent_to_customer_at", { mode: 'string' }),
	customerApprovedAt: datetime("customer_approved_at", { mode: 'string' }),
	customerRejectedAt: datetime("customer_rejected_at", { mode: 'string' }),
	rejectionReason: nvarchar("rejection_reason", { length: 'max' }),
	invoiceNumber: varchar("invoice_number", { length: 50 }),
	invoiceIssuedAt: datetime("invoice_issued_at", { mode: 'string' }),
	invoiceDueDate: date("invoice_due_date", { mode: 'string' }),
	pdfUrl: nvarchar("pdf_url", { length: 'max' }),
	xmlUrl: nvarchar("xml_url", { length: 'max' }),
	createdAt: datetime("created_at", { mode: 'string' }).defaultGetDate(),
	updatedAt: datetime("updated_at", { mode: 'string' }).defaultGetDate(),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__wms_pre___3213E83FA7F1385B"}),
]);

export const workOrderItems = mssqlTable("work_order_items", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	workOrderId: int("work_order_id").notNull(),
	itemType: nvarchar("item_type", { length: 20 }).notNull(),
	productId: int("product_id"),
	serviceDescription: nvarchar("service_description", { length: 255 }),
	quantity: decimal({ precision: 10, scale: 2 }).notNull(),
	unitCost: decimal("unit_cost", { precision: 18, scale: 2 }),
	totalCost: decimal("total_cost", { precision: 18, scale: 2 }),
	createdAt: datetime2("created_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__work_ord__3213E83F96B3B240"}),
]);

export const workOrderMechanics = mssqlTable("work_order_mechanics", {
	id: int().identity({ seed: 1 ,increment: 1 }),
	workOrderId: int("work_order_id").notNull(),
	mechanicId: int("mechanic_id").notNull(),
	assignedAt: datetime2("assigned_at", { mode: 'string', precision: 7 }).default(sql`getdate()`),
	startedAt: datetime2("started_at", { mode: 'string', precision: 7 }),
	completedAt: datetime2("completed_at", { mode: 'string', precision: 7 }),
	hoursWorked: decimal("hours_worked", { precision: 5, scale: 2 }),
	laborCost: decimal("labor_cost", { precision: 18, scale: 2 }),
	notes: nvarchar({ length: 500 }),
}, (table) => [
	primaryKey({ columns: [table.id], name: "PK__work_ord__3213E83F5B20F548"}),
]);
